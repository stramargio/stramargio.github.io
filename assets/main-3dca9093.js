import{A as kt,e as Bt,s as b,a as W,I as k,h as me,b as Yt,L as j,c as ge,d as bt,f as Z,g as yt,i as zt,j as it,M as be,k as ut,l as rt,u as we,S as et,m as st,n as pt,o as ye,p as Mt,N as Ht,R as Ot,q as ve,r as ee,t as ke,v as Se,w as Ce,C as Ie,x as Te,y as Kt,z as xe,B as Gt}from"./useTitle-7a0190e0.js";import{o as t,p as D,h as E,u as ot,_,a as H,y as ne,F as ft,s as se,g as Le,m as Jt,b as at,c as Lt,M as St,d as vt,e as dt,f as qt,I as oe,i as Ct,j as $e,k as De,R as ie,l as Re,n as Nt,q as Me,r as Xt,t as _e,v as Et,w as tt,D as Ne,H as Ae}from"./vendor-4c104cc0.js";function Pt({skeleton:e,account:s,avatarSize:i="xl",instance:n,external:c,onClick:o}){if(e)return t("div",{class:"account-block skeleton",children:[t(kt,{size:i}),t("span",{children:[t("b",{children:"████████"}),t("br",{}),"@██████"]})]});const{acct:a,avatar:h,avatarStatic:d,displayName:f,username:r,emojis:u,url:l}=s,m=Bt(f,u);return t("a",{class:"account-block",href:l,target:c?"_blank":null,title:`@${a}`,onClick:g=>{if(!c){if(g.preventDefault(),o)return o(g);b.showAccount={account:s,instance:n}}},children:[t(kt,{url:h,size:i}),t("span",{children:[f?t("b",{dangerouslySetInnerHTML:{__html:m}}):t("b",{children:r}),t("br",{}),"@",a]})]})}function Ee({account:e,instance:s,onClose:i}){const{masto:n,instance:c,authenticated:o}=W({instance:s}),[a,h]=D("default"),d=typeof e=="string",[f,r]=D(d?null:e);E(()=>{d?(h("loading"),(async()=>{try{const J=await n.v1.accounts.lookup({acct:e,skip_webfinger:!1});r(J),h("default")}catch{try{const ct=await n.v2.search({q:e,type:"accounts",limit:1,resolve:o});if(ct.accounts.length){r(ct.accounts[0]),h("default");return}r(null),h("error")}catch{r(null),h("error")}}})()):r(e)},[e]);const{acct:u,avatar:l,avatarStatic:m,bot:g,createdAt:y,displayName:p,emojis:I,fields:R,followersCount:S,followingCount:U,group:V,header:C,headerStatic:L,id:w,lastStatusAt:M,locked:$,note:x,statusesCount:F,url:A,username:z}=f||{},K=ot("esc",i,[i]);return t("div",{ref:K,id:"account-container",class:`sheet ${a==="loading"?"skeleton":""}`,children:[a==="error"&&t("div",{class:"ui-state",children:[t("p",{children:"Unable to load account."}),t("p",{children:t("a",{href:e,target:"_blank",children:["Go to account page ",t(k,{icon:"external"})]})})]}),a==="loading"?t(_,{children:[t("header",{children:t(Pt,{avatarSize:"xxxl",skeleton:!0})}),t("main",{children:[t("div",{class:"note",children:[t("p",{children:"████████ ███████"}),t("p",{children:"███████████████ ███████████████"})]}),t("p",{class:"stats",children:[t("span",{children:"██ Posts"}),t("span",{children:"██ Following"}),t("span",{children:"██ Followers"})]})]})]}):f&&t(_,{children:[t("header",{children:t(Pt,{account:f,instance:c,avatarSize:"xxxl",external:!0})}),t("main",{tabIndex:"-1",children:[g&&t(_,{children:t("span",{class:"tag",children:[t(k,{icon:"bot"})," Automated"]})}),t("div",{class:"note",onClick:me({instance:c}),dangerouslySetInnerHTML:{__html:Yt(x,{emojis:I})}}),(R==null?void 0:R.length)>0&&t("div",{class:"profile-metadata",children:R.map(({name:J,value:ct,verifiedAt:ht})=>t("div",{class:`profile-field ${ht?"profile-verified":""}`,children:[t("b",{children:[t("span",{dangerouslySetInnerHTML:{__html:Bt(J,I)}})," ",!!ht&&t(k,{icon:"check-circle",size:"s"})]}),t("p",{dangerouslySetInnerHTML:{__html:Yt(ct,{emojis:I})}})]},J))}),t("p",{class:"stats",children:[t(j,{to:c?`/${c}/a/${w}`:`/a/${w}`,onClick:()=>{ge()},children:["Posts",t("br",{}),t("b",{title:F,children:bt(F)})," "]}),t("span",{children:["Following",t("br",{}),t("b",{title:U,children:bt(U)})," "]}),t("span",{children:["Followers",t("br",{}),t("b",{title:S,children:bt(S)})," "]}),!!y&&t("span",{children:["Joined",t("br",{}),t("b",{children:t("time",{datetime:y,children:Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"numeric"}).format(new Date(y))})})]})]}),t(Pe,{info:f,instance:c,authenticated:o})]})]})]})}function Pe({info:e,instance:s,authenticated:i}){if(!e)return null;const{masto:n,instance:c,authenticated:o}=W(),a=s===c,[h,d]=D("default"),[f,r]=D(null),[u,l]=D([]),{id:m,locked:g}=e,y=H(m),{following:p,showingReblogs:I,notifying:R,followedBy:S,blocking:U,blockedBy:V,muting:C,mutingNotifications:L,requested:w,domainBlocking:M,endorsed:$}=f||{};return E(()=>{if(e){const x=Z.session.get("currentAccount");let F;(async()=>{if(a&&i)F=m;else if(!a&&o){const K=e.acct.includes("@");try{F=(await n.v2.search({q:K?e.acct:`${e.username}@${s}`,type:"accounts",limit:1,resolve:!0})).accounts[0].id}catch{}}if(!F||x===F)return;y.current=F,d("loading"),l([]);const A=n.v1.accounts.fetchRelationships([F]),z=n.v1.accounts.fetchFamiliarFollowers(F);try{const K=await A;if(K.length){const J=K[0];if(r(J),!J.following)try{const ct=await z;l(ct[0].accounts.slice(0,10))}catch{}}d("default")}catch{d("error")}})()}},[e,i]),t(_,{children:[(u==null?void 0:u.length)>0&&t("p",{class:"common-followers",children:["Common followers"," ",t("span",{class:"ib",children:u.map(x=>t("a",{href:x.url,rel:"noopener noreferrer",onClick:F=>{F.preventDefault(),b.showAccount={account:x,instance:s}},children:t(kt,{url:x.avatarStatic,size:"l",alt:`${x.displayName} @${x.acct}`})}))})]}),t("p",{class:"actions",children:[S?t("span",{class:"tag",children:"Following you"}):t("span",{})," ",h!=="loading"&&f&&t("button",{type:"button",class:`${p||w?"light swap":""}`,"data-swap-state":p||w?"danger":"",disabled:h==="loading",onClick:()=>{d("loading"),(async()=>{try{let x;p||w?confirm(w?"Withdraw follow request?":`Unfollow @${e.acct||e.username}?`)&&(x=await n.v1.accounts.unfollow(y.current)):x=await n.v1.accounts.follow(y.current),x&&r(x),d("default")}catch(x){alert(x),d("error")}})()},children:p?t(_,{children:[t("span",{children:"Following"}),t("span",{children:"Unfollow…"})]}):w?t(_,{children:[t("span",{children:"Requested"}),t("span",{children:"Withdraw…"})]}):g?t(_,{children:[t(k,{icon:"lock"})," ",t("span",{children:"Follow"})]}):"Follow"})]})]})}function Ue(){const{masto:e}=W(),[s,i]=D("default"),[n,c]=D([]),[o,a]=ne(d=>d+1,0);E(()=>{i("loading"),(async()=>{try{const d=await yt.drafts.keys();if(d.length){const f=zt(),r=d.filter(u=>u.startsWith(f));if(r.length){const u=await yt.drafts.getMany(r);u.sort((l,m)=>new Date(m.updatedAt).getTime()-new Date(l.updatedAt).getTime()),c(u)}else c([])}else c([]);i("default")}catch{i("error")}})()},[o]);const h=(n==null?void 0:n.length)>0;return t("div",{class:"sheet",children:[t("header",{children:[t("h2",{children:["Unsent drafts ",t(it,{abrupt:!0,hidden:s!=="loading"})]}),h&&t("div",{class:"insignificant",children:"Looks like you have unsent drafts. Let's continue where you left off."})]}),t("main",{children:h?t(_,{children:[t("ul",{class:"drafts-list",children:n.map(d=>{const{updatedAt:f,key:r,draftStatus:u,replyTo:l}=d,m=new Date().getFullYear(),g=new Date(f);return t("li",{children:[t("div",{class:"mini-draft-meta",children:[t("b",{children:[t(k,{icon:l?"reply":"quill",size:"s"})," ",t("time",{children:[!!l&&t(_,{children:["@",l.account.acct,t("br",{})]}),Intl.DateTimeFormat("en",{year:g.getFullYear()===m?void 0:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"2-digit",second:"2-digit"}).format(g)]})]}),t("button",{type:"button",class:"small light",disabled:s==="loading",onClick:()=>{(async()=>{try{confirm("Delete this draft?")&&(await yt.drafts.del(r),a())}catch{alert("Error deleting draft! Please try again.")}})()},children:"Delete…"})]}),t("button",{type:"button",disabled:s==="loading",class:"draft-item",onClick:async()=>{let y;if(l){i("loading");try{y=await e.v1.statuses.fetch(l.id)}catch{alert("Error fetching reply-to status!"),i("default");return}i("default")}window.__COMPOSE__={draftStatus:u,replyToStatus:y},b.showCompose=!0,b.showDrafts=!1},children:t(Fe,{draft:d})})]},f)})}),t("p",{children:t("button",{type:"button",class:"light danger",disabled:s==="loading",onClick:()=>{(async()=>{if(confirm("Delete all drafts?")){i("loading");try{await yt.drafts.delMany(n.map(f=>f.key)),i("default"),a()}catch{alert("Error deleting drafts! Please try again."),i("error")}}})()},children:"Delete all drafts…"})})]}):t("p",{children:"No drafts found."})})]})}function Fe({draft:e}){var u;const{draftStatus:s,replyTo:i}=e,{status:n,spoilerText:c,poll:o,mediaAttachments:a}=s,h=((u=o==null?void 0:o.options)==null?void 0:u.length)>0,d=(a==null?void 0:a.length)>0,f=h||d,r=ft(()=>{if(!d)return;const l=a.find(y=>/image/.test(y.type));if(!l)return;const{file:m}=l;return URL.createObjectURL(m)},[d,a]);return t(_,{children:t("div",{class:"mini-draft",children:[f&&t("div",{class:`mini-draft-aside ${r?"has-image":""}`,style:r?{"--bg-image":`url(${r})`}:{},children:[h&&t(k,{icon:"poll"}),d&&t("span",{children:[t(k,{icon:"attachment"})," ",t("small",{children:a==null?void 0:a.length})]})]}),t("div",{class:"mini-draft-main",children:[!!c&&t("div",{class:"mini-draft-spoiler",children:c}),!!n&&t("div",{class:"mini-draft-status",children:n})]})]})})}function Be({mediaAttachments:e,statusID:s,instance:i,index:n=0,onClose:c=()=>{}}){var g,y;const o=H(null),[a,h]=D(n),d=H(null);se(()=>{var p;(p=d.current)==null||p.scrollIntoView()},[]);const f=H(s);E(()=>{const p=n*o.current.clientWidth,I=f.current!==s;I&&(f.current=s),o.current.scrollTo({left:p,behavior:I?"auto":"smooth"})},[n,s]);const[r,u]=D(!0);E(()=>{let p=()=>{c()};return o.current&&o.current.addEventListener("swiped-down",p),()=>{o.current&&o.current.removeEventListener("swiped-down",p)}},[]),ot("esc",c,[c]);const[l,m]=D(!1);return E(()=>{let p=()=>{const{clientWidth:I,scrollLeft:R}=o.current,S=Math.round(R/I);h(S)};return o.current&&o.current.addEventListener("scroll",p,{passive:!0}),()=>{o.current&&o.current.removeEventListener("scroll",p)}},[]),t(_,{children:[t("div",{ref:o,tabIndex:"-1","data-swipe-threshold":"44",class:"carousel",onClick:p=>{(p.target.classList.contains("carousel-item")||p.target.classList.contains("media"))&&c()},children:e==null?void 0:e.map((p,I)=>{const{blurhash:R}=p,S=R?Le(R):null;return t("div",{class:"carousel-item",style:{"--average-color":`rgb(${S==null?void 0:S.join(",")})`,"--average-color-alpha":`rgba(${S==null?void 0:S.join(",")}, .5)`},tabindex:"0",ref:I===a?d:null,onClick:U=>{U.target!==U.currentTarget&&u(!r)},children:[!!p.description&&t("button",{type:"button",class:"plain2 media-alt",hidden:!r,onClick:()=>{m(p.description)},children:[t(k,{icon:"info"}),t("span",{class:"media-alt-desc",children:p.description})]}),t(be,{media:p,showOriginal:!0})]},p.id)})}),t("div",{class:"carousel-top-controls",hidden:!r,children:[t("span",{children:t("button",{type:"button",class:"carousel-button plain3",onClick:()=>c(),children:t(k,{icon:"x"})})}),(e==null?void 0:e.length)>1?t("span",{class:"carousel-dots",children:e==null?void 0:e.map((p,I)=>t("button",{type:"button",disabled:I===a,class:`plain carousel-dot ${I===a?"active":""}`,onClick:R=>{R.preventDefault(),R.stopPropagation(),o.current.scrollTo({left:o.current.clientWidth*I,behavior:"smooth"})},children:"•"},p.id))}):t("span",{}),t("span",{children:[t(j,{to:i?`/${i}/s/${s}`:`/s/${s}`,class:"button carousel-button media-post-link plain3",onClick:()=>{window.matchMedia("(min-width: calc(40em + 350px))").matches||c()},children:[t("span",{class:"button-label",children:"See post "}),"»"]})," ",t("a",{href:((g=e[a])==null?void 0:g.remoteUrl)||((y=e[a])==null?void 0:y.url),target:"_blank",class:"button carousel-button plain3",title:"Open original media in new window",children:t(k,{icon:"popout",alt:"Open original media in new window"})})," "]})]}),(e==null?void 0:e.length)>1&&t("div",{class:"carousel-controls",hidden:!r,children:[t("button",{type:"button",class:"carousel-button plain3",hidden:a===0,onClick:p=>{p.preventDefault(),p.stopPropagation(),o.current.scrollTo({left:o.current.clientWidth*(a-1),behavior:"smooth"})},children:t(k,{icon:"arrow-left"})}),t("button",{type:"button",class:"carousel-button plain3",hidden:a===e.length-1,onClick:p=>{p.preventDefault(),p.stopPropagation(),o.current.scrollTo({left:o.current.clientWidth*(a+1),behavior:"smooth"})},children:t(k,{icon:"arrow-right"})})]}),!!l&&t(ut,{class:"light",onClick:p=>{p.target===p.currentTarget&&m(!1)},children:t("div",{class:"sheet",children:[t("header",{children:t("h2",{children:"Media description"})}),t("main",{children:t("p",{style:{whiteSpace:"pre-wrap"},children:l})})]})}),!!l&&t(ut,{class:"light",onClick:p=>{p.target===p.currentTarget&&m(!1)},children:t("div",{class:"sheet",children:[t("header",{children:t("h2",{children:"Media description"})}),t("main",{children:t("p",{style:{whiteSpace:"pre-wrap"},children:l})})]})})]})}function Ut({children:e}){if(typeof e=="string")return e;const[s,i]=D("");return E(()=>{Promise.resolve(e).then(i)},[e]),s}const ze=9,He=["following","notifications","list","public","bookmarks","favourites","hashtag"],Oe={following:"Home / Following",notifications:"Notifications",list:"List",public:"Public",search:"Search","account-statuses":"Account",bookmarks:"Bookmarks",favourites:"Favourites",hashtag:"Hashtag"},qe={list:[{text:"List ID",name:"id"}],public:[{text:"Local only",name:"local",type:"checkbox"},{text:"Instance",name:"instance",type:"text",placeholder:"e.g. mastodon.social"}],search:[{text:"Search term",name:"query",type:"text"}],"account-statuses":[{text:"@",name:"id",type:"text",placeholder:"cheeaun@mastodon.social"}],hashtag:[{text:"#",name:"hashtag",type:"text",placeholder:"e.g. PixelArt (Max 5, space-separated)",pattern:"[^#]+"}]},At={following:{id:"home",title:(e,s)=>s===0?"Home":"Following",path:"/",icon:"home"},notifications:{id:"notifications",title:"Notifications",path:"/notifications",icon:"notification"},list:{id:"list",title:Jt(async({id:e})=>(await W().masto.v1.lists.fetch(e)).title,{cacheKey:([{id:e}])=>e}),path:({id:e})=>`/l/${e}`,icon:"list"},public:{id:"public",title:({local:e,instance:s})=>`${e?"Local":"Federated"} (${s})`,path:({local:e,instance:s})=>`/${s}/p${e?"/l":""}`,icon:({local:e})=>e?"group":"earth"},search:{id:"search",title:({query:e})=>e,path:({query:e})=>`/search?q=${e}`,icon:"search"},"account-statuses":{id:"account-statuses",title:Jt(async({id:e})=>{const s=await W().masto.v1.accounts.fetch(e);return s.username||s.acct||s.displayName},{cacheKey:([{id:e}])=>e}),path:({id:e})=>`/a/${e}`,icon:"user"},bookmarks:{id:"bookmarks",title:"Bookmarks",path:"/b",icon:"bookmark"},favourites:{id:"favourites",title:"Favourites",path:"/f",icon:"heart"},hashtag:{id:"hashtag",title:({hashtag:e})=>e,path:({hashtag:e})=>`/t/${e.split(/\s+/).join("+")}`,icon:"hashtag"}};function Ve(){const e=at(b),{masto:s}=W(),{shortcuts:i}=e,[n,c]=D([]),[o,a]=D([]);return E(()=>{(async()=>{try{const h=await s.v1.lists.list();c(h)}catch{}})(),(async()=>{try{const h=s.v1.followedTags.list(),d=[];do{const{value:f,done:r}=await h.next();if(r||(f==null?void 0:f.length)===0)break;d.push(...f)}while(!0);a(d)}catch{}})()},[]),t("div",{id:"shortcuts-settings-container",class:"sheet",tabindex:"-1",children:[t("header",{children:t("h2",{children:[t(k,{icon:"shortcut"})," Shortcuts"," ",t("sup",{style:{fontSize:12,opacity:.5,textTransform:"uppercase"},children:"beta"})]})}),t("main",{children:[t("p",{children:"Specify a list of shortcuts that'll appear in the floating Shortcuts button."}),t("p",{children:t("label",{children:["View mode"," ",t("select",{value:e.settings.shortcutsViewMode||"float-button",onChange:h=>{b.settings.shortcutsViewMode=h.target.value},children:[t("option",{value:"float-button",children:"Floating button"}),t("option",{value:"multi-column",children:"Multi-column"}),t("option",{value:"tab-menu-bar",children:"Tab/Menu bar "})]})]})}),i.length>0?t("ol",{class:"shortcuts-list",children:i.map((h,d)=>{const f=d+Object.values(h),{type:r}=h;if(!At[r])return null;let{icon:u,title:l}=At[r];return typeof l=="function"&&(l=l(h)),typeof u=="function"&&(u=u(h)),t("li",{children:[t(k,{icon:u}),t("span",{class:"shortcut-text",children:t(Ut,{children:l})}),t("span",{class:"shortcut-actions",children:[t("button",{type:"button",class:"plain small",disabled:d===0,onClick:()=>{const m=Array.from(b.shortcuts);if(d>0){const g=b.shortcuts[d-1];m[d-1]=h,m[d]=g,b.shortcuts=m}},children:t(k,{icon:"arrow-up",alt:"Move up"})}),t("button",{type:"button",class:"plain small",disabled:d===i.length-1,onClick:()=>{const m=Array.from(b.shortcuts);if(d<b.shortcuts.length-1){const g=b.shortcuts[d+1];m[d+1]=h,m[d]=g,b.shortcuts=m}},children:t(k,{icon:"arrow-down",alt:"Move down"})}),t("button",{type:"button",class:"plain small",onClick:()=>{b.shortcuts.splice(d,1)},children:t(k,{icon:"x",alt:"Remove"})})]})]},f)})}):t("p",{class:"ui-state insignificant",children:"No shortcuts yet. Add one from the form below."}),t("hr",{}),t(je,{disabled:i.length>=ze,lists:n,followedHashtags:o,onSubmit:h=>{b.shortcuts.push(h)}})]})]})}function je({type:e,lists:s,followedHashtags:i,onSubmit:n,disabled:c}){var h,d;const[o,a]=D(e);return t(_,{children:t("form",{onSubmit:f=>{f.preventDefault();const r=new FormData(f.target),u={};r.forEach((l,m)=>{u[m]=l==null?void 0:l.trim()}),u.type&&(n(u),f.target.reset(),a(null))},children:[t("header",{children:[t("h3",{children:"Add a shortcut"}),t("button",{type:"submit",disabled:c,children:"Add"})]}),t("p",{children:t("label",{children:[t("span",{children:"Timeline"}),t("select",{required:!0,disabled:c,onChange:f=>{a(f.target.value)},name:"type",children:[t("option",{}),He.map(f=>t("option",{value:f,children:Oe[f]}))]})]})}),(d=(h=qe[o])==null?void 0:h.map)==null?void 0:d.call(h,({text:f,name:r,type:u,placeholder:l,pattern:m})=>o==="list"?t("p",{children:t("label",{children:[t("span",{children:"List"}),t("select",{name:"id",required:!0,disabled:c,children:s.map(g=>t("option",{value:g.id,children:g.title}))})]})}):t("p",{children:t("label",{children:[t("span",{children:f})," ",t("input",{type:u,name:r,placeholder:l,required:u==="text",disabled:c,list:o==="hashtag"?"followed-hashtags-datalist":null,autocorrect:"off",autocapitalize:"off",spellcheck:!1,pattern:m}),o==="hashtag"&&i.length>0&&t("datalist",{id:"followed-hashtags-datalist",children:i.map(g=>t("option",{value:g.name}))})]})}))]})})}function We(){const e=at(b),{shortcuts:s}=e;if(!s.length)return null;const i=H(),n=ft(()=>s.map((o,a)=>{const{type:h,...d}=o;if(!At[h])return null;let{id:f,path:r,title:u,icon:l}=At[h];return typeof f=="function"&&(f=f(d)),typeof r=="function"&&(r=r(d,a)),typeof u=="function"&&(u=u(d)),typeof l=="function"&&(l=l(d)),{id:f,path:r,title:u,icon:l}}).filter(Boolean),[s]),c=Lt();return ot(["1","2","3","4","5","6","7","8","9"],(o,a)=>{var d,f;const h=parseInt(a.keys[0],10)-1;if(h<n.length){const{path:r}=n[h];r&&(c(r),(f=(d=i.current)==null?void 0:d.closeMenu)==null||f.call(d))}}),t("div",{id:"shortcuts",children:e.settings.shortcutsViewMode==="tab-menu-bar"?t("nav",{class:"tab-bar",children:t("ul",{children:n.map(({id:o,path:a,title:h,icon:d},f)=>t("li",{children:t(j,{to:a,onClick:r=>{if(r.target.classList.contains("is-active")){r.preventDefault();const u=document.getElementById(`${o}-page`);if(u){u.scrollTop=0;const l=u.querySelector(".updates-button");l&&l.click()}}},children:[t(k,{icon:d,size:"xl",alt:h}),t("span",{children:t(Ut,{children:h})})]})},f+h))})}):t(St,{instanceRef:i,overflow:"auto",viewScroll:"close",boundingBoxPadding:"8 8 8 8",menuClassName:"glass-menu shortcuts-menu",offsetY:8,position:"anchor",menuButton:t("button",{type:"button",id:"shortcuts-button",class:"plain",onTransitionStart:o=>{var a,h;try{const{target:d}=o;getComputedStyle(d).pointerEvents==="none"&&((h=(a=i.current)==null?void 0:a.closeMenu)==null||h.call(a))}catch{}},children:t(k,{icon:"shortcut",size:"xl",alt:"Shortcuts"})}),children:n.map(({path:o,title:a,icon:h},d)=>t(rt,{to:o,class:"glass-menu-item",children:[t(k,{icon:h,size:"l"})," ",t("span",{class:"menu-grow",children:t(Ut,{children:a})}),t("span",{class:"menu-shortcut hide-until-focus-visible",children:d+1})]},d+a))})})}function ce(e=()=>{},s=[]){const i=H(e);E(()=>{const n=()=>{const c=document.hidden||document.visibilityState==="hidden";i.current(!c)};return document.addEventListener("visibilitychange",n),()=>document.removeEventListener("visibilitychange",n)},[])}function It({scrollableElement:e,distanceFromStart:s=1,distanceFromEnd:i=1,scrollThresholdStart:n=10,scrollThresholdEnd:c=10,direction:o="vertical",distanceFromStartPx:a,distanceFromEndPx:h}={}){const[d,f]=D(null),[r,u]=D(!1),[l,m]=D(!1),[g,y]=D(!1),[p,I]=D(!1),R=o==="vertical";return e?(E(()=>{let S=R?e.scrollTop:e.scrollLeft;function U(){const{scrollTop:V,scrollLeft:C,scrollHeight:L,scrollWidth:w,clientHeight:M,clientWidth:$}=e,x=R?V:C,F=R?L:w,A=R?M:$,z=Math.abs(x-S),K=a||Math.min(A*s,F,x),J=h||Math.min(A*i,F,F-x-A);z>=(S<x?c:n)&&(f(S<x?"end":"start"),S=x),u(x<=0),m(x+A>=F),y(x<=K),I(x+A>=F-J)}return e.addEventListener("scroll",U,{passive:!0}),()=>e.removeEventListener("scroll",U)},[e,s,i,n,c]),{scrollDirection:d,reachStart:r,reachEnd:l,nearReachStart:g,nearReachEnd:p,init:()=>{e&&e.dispatchEvent(new Event("scroll"))}}):{}}function $t(e){const s=at(b),{instance:i,authenticated:n}=W(),c=s.settings.shortcutsColumnsMode&&!s.shortcuts.find(o=>o.type==="following");return t(St,{portal:{target:document.body},...e,overflow:"auto",viewScroll:"close",boundingBoxPadding:"8 8 8 8",menuButton:t("button",{type:"button",class:"button plain",children:t(k,{icon:"menu",size:"l"})}),children:[t(rt,{to:"/",children:[t(k,{icon:"home",size:"l"})," ",t("span",{children:"Home"})]}),n&&t(_,{children:[c&&t(rt,{to:"/following",children:[t(k,{icon:"following",size:"l"})," ",t("span",{children:"Following"})]}),t(rt,{to:"/notifications",children:[t(k,{icon:"notification",size:"l"})," ",t("span",{children:"Notifications"}),s.notificationsShowNew&&t("sup",{title:"New",style:{opacity:.5},children:[" ","•"]})]}),t(vt,{}),t(rt,{to:"/l",children:[t(k,{icon:"list",size:"l"})," ",t("span",{children:"Lists"})]}),t(rt,{to:"/ft",children:[t(k,{icon:"hashtag",size:"l"})," ",t("span",{children:"Followed Hashtags"})]}),t(rt,{to:"/b",children:[t(k,{icon:"bookmark",size:"l"})," ",t("span",{children:"Bookmarks"})]}),t(rt,{to:"/f",children:[t(k,{icon:"heart",size:"l"})," ",t("span",{children:"Favourites"})]})]}),t(vt,{}),t(rt,{to:"/search",children:[t(k,{icon:"search",size:"l"})," ",t("span",{children:"Search"})]}),t(rt,{to:`/${i}/p/l`,children:[t(k,{icon:"group",size:"l"})," ",t("span",{children:"Local"})]}),t(rt,{to:`/${i}/p`,children:[t(k,{icon:"earth",size:"l"})," ",t("span",{children:"Federated"})]}),n&&t(_,{children:[t(vt,{}),t(dt,{onClick:()=>{b.showShortcutsSettings=!0},children:[t(k,{icon:"shortcut",size:"l"})," ",t("span",{children:"Shortcuts Settings…"})]}),t(dt,{onClick:()=>{b.showSettings=!0},children:[t(k,{icon:"gear",size:"l"})," ",t("span",{children:"Settings…"})]})]})]})}function wt({title:e,titleComponent:s,id:i,instance:n,emptyText:c,errorText:o,useItemID:a,boostsCarousel:h,fetchItems:d=()=>{},checkForUpdates:f=()=>{},checkForUpdatesInterval:r=6e4,headerStart:u,headerEnd:l}){const[m,g]=D([]),[y,p]=D("default"),[I,R]=D(!1),[S,U]=D(!1),[V,C]=D(!0),L=H(),w=qt(v=>{U(!1),y!=="loading"&&(p("loading"),(async()=>{try{let{done:N,value:P}=await d(v);P!=null&&P.length?(h&&(P=Ye(P)),g(v?P:Y=>[...Y,...P]),R(!N)):R(!1),p("default")}catch{p("error")}finally{w.cancel()}})())},1500,{leading:!0,trailing:!1}),M=".timeline-item, .timeline-item-alt",$=ot("j, shift+j",(v,N)=>{var O,X;const P=document.activeElement.closest(M),Y=P==null?void 0:P.getBoundingClientRect(),B=Array.from(L.current.querySelectorAll(M));if(P&&Y.top<L.current.clientHeight&&Y.bottom>0){const q=B.indexOf(P);let G=B[q+1];N.shift&&(G=B.find((nt,lt)=>lt>q&&!nt.classList.contains("timeline-item-alt"))),G&&(G.focus(),(O=G.scrollIntoViewIfNeeded)==null||O.call(G))}else{const q=B.find(G=>{const nt=G.getBoundingClientRect();return nt.top>=44&&nt.left>=0});q&&(q.focus(),(X=q.scrollIntoViewIfNeeded)==null||X.call(q))}}),x=ot("k, shift+k",(v,N)=>{var O,X;const P=document.activeElement.closest(M),Y=P==null?void 0:P.getBoundingClientRect(),B=Array.from(L.current.querySelectorAll(M));if(P&&Y.top<L.current.clientHeight&&Y.bottom>0){const q=B.indexOf(P);let G=B[q-1];N.shift&&(G=B.findLast((nt,lt)=>lt<q&&!nt.classList.contains("timeline-item-alt"))),G&&(G.focus(),(O=G.scrollIntoViewIfNeeded)==null||O.call(G))}else{const q=B.find(G=>{const nt=G.getBoundingClientRect();return nt.top>=44&&nt.left>=0});q&&(q.focus(),(X=q.scrollIntoViewIfNeeded)==null||X.call(q))}}),F=ot(["enter","o"],()=>{const v=document.activeElement.closest(M);v&&v.click()}),{scrollDirection:A,nearReachStart:z,nearReachEnd:K,reachStart:J,reachEnd:ct}=It({scrollableElement:L.current,distanceFromEnd:2,scrollThresholdStart:44});E(()=>{var v;(v=L.current)==null||v.scrollTo({top:0}),w(!0)},[]),E(()=>{J&&w(!0)},[J]),E(()=>{(K||ct&&I)&&w()},[K,I]);const ht=H();ce(v=>{if(v){const N=Date.now()-ht.current;(!ht.current||N>1e3*60)&&(async()=>await f()&&U(!0))()}else ht.current=Date.now();C(v)},[]),we(()=>{(async()=>await f()&&U(!0))()},V&&!S?r:null);const T=A==="end"&&!z;return t("div",{id:`${i}-page`,class:"deck-container",ref:v=>{L.current=v,$.current=v,x.current=v,F.current=v},tabIndex:"-1",children:t("div",{class:"timeline-deck deck",children:[t("header",{hidden:T,onClick:v=>{var N;v.target.closest("a, button")||(N=L.current)==null||N.scrollTo({top:0,behavior:"smooth"})},onDblClick:v=>{v.target.closest("a, button")||w(!0)},children:[t("div",{class:"header-grid",children:[t("div",{class:"header-side",children:[t($t,{}),u??t(j,{to:"/",class:"button plain home-button",children:t(k,{icon:"home",size:"l"})})]}),e&&(s||t("h1",{children:e})),t("div",{class:"header-side",children:[t(it,{hidden:y!=="loading"}),!!l&&l]})]}),m.length>0&&y!=="loading"&&!T&&S&&t("button",{class:"updates-button shiny-pill",type:"button",onClick:()=>{var v;w(!0),(v=L.current)==null||v.scrollTo({top:0,behavior:"smooth"})},children:[t(k,{icon:"arrow-up"})," New posts"]})]}),m.length?t(_,{children:[t("ul",{class:"timeline",children:[m.map(v=>{const{id:N,reblog:P,items:Y,type:B}=v,O=(P==null?void 0:P.id)||N,X=n?`/${n}/s/${O}`:`/s/${O}`;let q="";return B==="boosts"?q=`${Y.length} Boosts`:B==="pinned"&&(q="Pinned posts"),Y?t("li",{children:t(Ke,{title:q,class:`${B}-carousel`,children:Y.map(G=>{const{id:nt,reblog:lt}=G,Tt=(lt==null?void 0:lt.id)||nt,Q=n?`/${n}/s/${Tt}`:`/s/${Tt}`;return t("li",{children:t(j,{class:"status-carousel-link timeline-item-alt",to:Q,children:a?t(et,{statusID:nt,instance:n,size:"s",contentTextWeight:!0}):t(et,{status:G,instance:n,size:"s",contentTextWeight:!0})})},nt)})})},`timeline-${N}`):t("li",{children:t(j,{class:"status-link timeline-item",to:X,children:a?t(et,{statusID:N,instance:n}):t(et,{status:v,instance:n})})},`timeline-${N}`)}),I&&y==="loading"&&t(_,{children:[t("li",{style:{height:"20vh"},children:t(et,{skeleton:!0})}),t("li",{style:{height:"25vh"},children:t(et,{skeleton:!0})})]})]}),y==="default"&&(I?t(oe,{onChange:v=>{v&&w()},children:t("button",{type:"button",class:"plain block",onClick:()=>w(),style:{marginBlockEnd:"6em"},children:"Show more…"})}):t("p",{class:"ui-state insignificant",children:"The end."}))]}):y==="loading"?t("ul",{class:"timeline",children:Array.from({length:5}).map((v,N)=>t("li",{children:t(et,{skeleton:!0})},N))}):y!=="error"&&t("p",{class:"ui-state",children:c}),y==="error"&&t("p",{class:"ui-state",children:[o,t("br",{}),t("br",{}),t("button",{class:"button plain",onClick:()=>w(!m.length),children:"Try again"})]})]})})}function Ye(e){let s=[],i=[],n=0;for(let c=0;c<e.length;c++){const o=e[c];o.reblog?(i.push(o),n++):(s.push(o),n<3&&(n=0))}if(i.length>e.length/4||n>=3){const c=i.map(o=>o.id);if(i.length>e.length*3/4)s=[...s,{id:c,items:i,type:"boosts"}];else{const o=Math.floor(s.length/2);s=[...s.slice(0,o),{id:c,items:i,type:"boosts"},...s.slice(o)]}return s}else return e}function Ke({title:e,class:s,children:i}){const n=H(),{reachStart:c,reachEnd:o,init:a}=It({scrollableElement:n.current,direction:"horizontal"});return E(()=>{a==null||a()},[]),t("div",{class:`status-carousel ${s}`,children:[t("header",{children:[t("h3",{children:e}),t("span",{children:[t("button",{type:"button",class:"small plain2",disabled:c,onClick:()=>{var h,d;(d=n.current)==null||d.scrollBy({left:-Math.min(320,(h=n.current)==null?void 0:h.offsetWidth),behavior:"smooth"})},children:t(k,{icon:"chevron-left"})})," ",t("button",{type:"button",class:"small plain2",disabled:o,onClick:()=>{var h,d;(d=n.current)==null||d.scrollBy({left:Math.min(320,(h=n.current)==null?void 0:h.offsetWidth),behavior:"smooth"})},children:t(k,{icon:"chevron-right"})})]})]}),t("ul",{ref:n,children:i})]})}const Ge=20;function Je(){const e=at(b),{id:s,...i}=Ct(),{masto:n,instance:c}=W({instance:i.instance}),o=H();async function a(l){const m=[];if(l){const{value:p}=await n.v1.accounts.listStatuses(s,{pinned:!0}).next();if(p!=null&&p.length)if(p.forEach(I=>{I._pinned=!0}),p.length>1){const I=p.map(R=>R.id);m.push({id:I,items:p,type:"pinned"})}else m.push(...p)}(l||!o.current)&&(o.current=n.v1.accounts.listStatuses(s,{limit:Ge}));const{value:g,done:y}=await o.current.next();return g!=null&&g.length&&m.push(...g),{value:m,done:y}}const[h,d]=D({});st(`${h!=null&&h.acct?"@"+h.acct:"Posts"}`,"/:instance?/a/:id"),E(()=>{(async()=>{try{const l=await n.v1.accounts.fetch(s);d(l)}catch{}})()},[s]);const{displayName:f,acct:r,emojis:u}=h;return t(wt,{title:`${h!=null&&h.acct?"@"+h.acct:"Posts"}`,titleComponent:t("h1",{class:"header-account",children:[t("b",{dangerouslySetInnerHTML:{__html:Bt(f,u)}}),t("div",{children:t("span",{children:["@",r]})})]}),id:"account-statuses",instance:c,emptyText:"Nothing to see here yet.",errorText:"Unable to load statuses",fetchItems:a,boostsCarousel:e.settings.boostsCarousel},s)}const Xe=20;function ae(){st("Bookmarks","/b");const{masto:e,instance:s}=W(),i=H();async function n(c){return(c||!i.current)&&(i.current=e.v1.bookmarks.list({limit:Xe})),await i.current.next()}return t(wt,{title:"Bookmarks",id:"bookmarks",emptyText:"No bookmarks yet. Go bookmark something!",errorText:"Unable to load bookmarks",instance:s,fetchItems:n})}const Qe=20;function le(){st("Favourites","/f");const{masto:e,instance:s}=W(),i=H();async function n(c){return(c||!i.current)&&(i.current=e.v1.favourites.list({limit:Qe})),await i.current.next()}return t(wt,{title:"Favourites",id:"favourites",emptyText:"No favourites yet. Go favourite something!",errorText:"Unable to load favourites",instance:s,fetchItems:n})}const Ze=200;function tn(){const{masto:e,instance:s}=W();st("Followed Hashtags","/ft");const[i,n]=D("default"),[c,o]=D([]);return E(()=>{n("loading"),(async()=>{try{const a=e.v1.followedTags.list({limit:Ze}),h=[];do{const{value:d,done:f}=await a.next();if(f||(d==null?void 0:d.length)===0)break;h.push(...d)}while(!0);o(h),n("default")}catch{n("error")}})()},[]),t("div",{id:"followed-hashtags-page",class:"deck-container",children:t("div",{class:"timeline-deck deck",children:[t("header",{children:t("div",{class:"header-grid",children:[t("div",{class:"header-side",children:[t($t,{}),t(j,{to:"/",class:"button plain",children:t(k,{icon:"home",size:"l"})})]}),t("h1",{children:"Followed Hashtags"}),t("div",{class:"header-side"})]})}),t("main",{children:c.length>0?t("ul",{class:"link-list",children:c.map(a=>t("li",{children:t(j,{to:s?`/${s}/t/${a.name}`:`/t/${a.name}`,children:[t(k,{icon:"hashtag"})," ",t("span",{children:a.name})]})}))}):i==="loading"?t("p",{class:"ui-state",children:t(it,{abrupt:!0})}):i==="error"?t("p",{class:"ui-state",children:"Unable to load followed hashtags."}):t("p",{class:"ui-state",children:"No hashtags followed yet."})})]})})}const en=20;function Vt({title:e,path:s,id:i,...n}){st(e||"Following",s||"/following");const{masto:c,instance:o}=W(),a=at(b),h=H(),d=H();async function f(m){(m||!h.current)&&(h.current=c.v1.timelines.listHome({limit:en}));const g=await h.current.next(),{value:y}=g;return y!=null&&y.length&&(m&&(d.current=y[0].id),y.forEach(p=>{pt(p,o)}),y.sort((p,I)=>{const R=new Date(p.createdAt);return new Date(I.createdAt)-R})),g}async function r(){try{const m=await c.v1.timelines.listHome({limit:5,since_id:d.current}).next(),{value:g}=m;return!!(g!=null&&g.length&&g.some(y=>!y.reblog))}catch{return!1}}const u=H(),l=async()=>{if(u.current&&(u.current.readyState===WebSocket.CONNECTING||u.current.readyState===WebSocket.OPEN))return;const m=await c.v1.stream.streamUser();return u.current=m.ws,u.current.__id=Math.random(),m.on("status.update",g=>{pt(g,o)}),m.on("delete",g=>{const y=ye(g,o);y&&(y._deleted=!0)}),m.ws.onclose=()=>{},m};return E(()=>{let m;return(async()=>m=await l())(),()=>{m&&(m.ws.close(),u.current=null)}},[]),t(wt,{title:e||"Following",id:i||"following",emptyText:"Nothing to see here.",errorText:"Unable to load posts.",instance:o,fetchItems:f,checkForUpdates:r,useItemID:!0,boostsCarousel:a.settings.boostsCarousel,...n})}const nn=20,sn=4,Qt=sn+1;function re(e){const s=Lt();let{hashtag:i,...n}=Ct();e.hashtag&&(i=e.hashtag);let c=i.trim().split(/[\s+]+/);c.sort(),i=c[0];const{masto:o,instance:a}=W({instance:n.instance}),{authenticated:h}=W(),d=c.map(S=>`#${S}`).join(" "),f=a?`${d} on ${a}`:d;st(f,"/:instance?/t/:hashtag");const r=H(),u=H();async function l(S){(S||!u.current)&&(u.current=o.v1.timelines.listHashtag(i,{limit:nn,any:c.slice(1)}));const U=await u.current.next(),{value:V}=U;return V!=null&&V.length&&S&&(r.current=V[0].id),U}async function m(){try{const S=await o.v1.timelines.listHashtag(i,{limit:1,any:c.slice(1),since_id:r.current}).next(),{value:U}=S;return!!(U!=null&&U.length)}catch{return!1}}const[g,y]=D("default"),[p,I]=D();E(()=>{(async()=>{try{const S=await o.v1.tags.fetch(i);I(S)}catch{}})()},[i]);const R=c.length>=Qt;return t(wt,{title:f,titleComponent:!!a&&t("h1",{class:"header-account",children:[t("b",{children:d}),t("div",{children:a})]}),id:"hashtag",instance:a,emptyText:"No one has posted anything with this tag yet.",errorText:"Unable to load posts with this tag",fetchItems:l,checkForUpdates:m,headerEnd:t(St,{portal:{target:document.body},setDownOverflow:!0,overflow:"auto",viewScroll:"close",position:"anchor",boundingBoxPadding:"8 8 8 8",menuButton:t("button",{type:"button",class:"plain",children:t(k,{icon:"more",size:"l"})}),children:[!!p&&c.length===1&&t(_,{children:[t(dt,{disabled:g==="loading"||!h,onClick:()=>{if(y("loading"),p.following){if(!confirm(`Unfollow #${i}?`)){y("default");return}o.v1.tags.unfollow(i).then(()=>{I({...p,following:!1}),Mt(`Unfollowed #${i}`)}).catch(U=>{alert(U)}).finally(()=>{y("default")})}else o.v1.tags.follow(i).then(()=>{I({...p,following:!0}),Mt(`Followed #${i}`)}).catch(S=>{alert(S)}).finally(()=>{y("default")})},children:p.following?t(_,{children:[t(k,{icon:"check-circle"})," ",t("span",{children:"Following…"})]}):t(_,{children:[t(k,{icon:"plus"})," ",t("span",{children:"Follow"})]})}),t(vt,{})]}),t($e,{className:"menu-field",disabled:R,children:({ref:S})=>t("form",{onSubmit:U=>{U.preventDefault();const V=U.target[0].value;V&&!c.some(C=>C.toLowerCase()===V.toLowerCase())&&(c.push(V),c.sort(),s(a?`/${a}/t/${c.join("+")}`:`/t/${c.join("+")}`))},children:[t(k,{icon:"hashtag"}),t("input",{ref:S,type:"text",placeholder:R?`Max ${Qt} tags`:"Add hashtag",required:!0,pattern:"[^\\s#]+",disabled:R})]})}),t(De,{takeOverflow:!0,children:c.map((S,U)=>t(dt,{onClick:V=>{c.splice(U,1),c.sort(),s(a?`/${a}/t/${c.join("+")}`:`/t/${c.join("+")}`)},children:[t(k,{icon:"x",alt:"Remove hashtag",class:"danger-icon"}),t("span",{children:[t("span",{class:"more-insignificant",children:"#"}),S]})]},S))}),t(vt,{}),t(dt,{disabled:!h,onClick:()=>{const S={type:"hashtag",hashtag:c.join(" ")};b.shortcuts.some(V=>V.type===S.type&&V.hashtag.split(/[\s+]+/).sort().join(" ")===S.hashtag.split(/[\s+]+/).sort().join(" "))?alert("This shortcut already exists"):(b.shortcuts.push(S),Mt("Hashtag shortcut added"))},children:[t(k,{icon:"shortcut"})," ",t("span",{children:"Add to Shorcuts"})]})]})},d)}const on=20;function de(e){var r;const{masto:s,instance:i}=W(),n=(e==null?void 0:e.id)||((r=Ct())==null?void 0:r.id),c=H(),o=H();async function a(u){(u||!o.current)&&(o.current=s.v1.timelines.listList(n,{limit:on}));const l=await o.current.next(),{value:m}=l;return m!=null&&m.length&&u&&(c.current=m[0].id),l}async function h(){try{const u=await s.v1.timelines.listList(n,{limit:1,since_id:c.current}),{value:l}=u;return!!(l!=null&&l.length)}catch{return!1}}const[d,f]=D("List");return st(d,"/l/:id"),E(()=>{(async()=>{try{const u=await s.v1.lists.fetch(n);f(u.title)}catch{}})()},[n]),t(wt,{title:d,id:"list",emptyText:"Nothing yet.",errorText:"Unable to load posts.",instance:i,fetchItems:a,checkForUpdates:h,boostsCarousel:!0,headerStart:t(j,{to:"/l",class:"button plain",children:t(k,{icon:"list",size:"l"})})})}const Zt={mention:"mentioned you in their status.",status:"posted a status.",reblog:"boosted your status.",follow:"followed you.",follow_request:"requested to follow you.",favourite:"favourited your status.",poll:"A poll you have voted in or created has ended.","poll-self":"A poll you have created has ended.","poll-voted":"A poll you have voted in has ended.",update:"A status you interacted with has been edited."},cn=30;function an(){st("Notifications","/notifications");const{masto:e,instance:s}=W(),i=at(b),[n,c]=D("default"),[o,a]=D(!1),[h,d]=D(!1),f=H(),{nearReachEnd:r,scrollDirection:u,reachStart:l,nearReachStart:m}=It({scrollableElement:f.current}),g=u==="end"&&!m,y=H();async function p(C){(C||!y.current)&&(y.current=e.v1.notifications.list({limit:cn}));const L=await y.current.next(),w=L.value;if(w!=null&&w.length){w.forEach($=>{pt($.status,s,{skipThreading:!0})});const M=dn(w);C?(b.notificationsLast=w[0],b.notifications=M):b.notifications.push(...M)}return b.notificationsShowNew=!1,b.notificationsLastFetchTime=Date.now(),L}const I=C=>{c("loading"),(async()=>{try{const{done:L}=await p(C);a(!L),c("default")}catch{c("error")}})()};E(()=>{I(!0)},[]),E(()=>{l&&I(!0)},[l]),E(()=>{r&&o&&I()},[r,o]);const R=new Date,S=new Date(R-24*60*60*1e3);let U=new Date;const V=!i.notifications.some(C=>new Date(C.createdAt).toDateString()===R.toDateString());return t("div",{id:"notifications-page",class:"deck-container",ref:f,tabIndex:"-1",children:t("div",{class:`timeline-deck deck ${h?"only-mentions":""}`,children:[t("header",{hidden:g,onClick:C=>{var L;C.target.closest("a, button")||(L=f.current)==null||L.scrollTo({top:0,behavior:"smooth"})},children:[t("div",{class:"header-grid",children:[t("div",{class:"header-side",children:[t($t,{}),t(j,{to:"/",class:"button plain",children:t(k,{icon:"home",size:"l"})})]}),t("h1",{children:"Notifications"}),t("div",{class:"header-side",children:t(it,{hidden:n!=="loading"})})]}),i.notificationsShowNew&&n!=="loading"&&t("button",{class:"updates-button shiny-pill",type:"button",onClick:()=>{var C;I(!0),(C=f.current)==null||C.scrollTo({top:0,behavior:"smooth"})},children:[t(k,{icon:"arrow-up"})," New notifications"]})]}),t("div",{id:"mentions-option",children:t("label",{children:[t("input",{type:"checkbox",checked:h,onChange:C=>{d(C.target.checked)}})," ","Only mentions"]})}),t("h2",{class:"timeline-header",children:"Today"}),V&&!!i.notifications.length&&t("p",{class:"ui-state insignificant",children:n==="default"?"You're all caught up.":t(_,{children:"…"})}),i.notifications.length?t(_,{children:i.notifications.map(C=>{if(h&&C.type!=="mention")return null;const L=new Date(C.createdAt),w=L.toDateString()!==U.toDateString();w&&(U=L);const M=L.toDateString()===S.toDateString()?"Yesterday":Intl.DateTimeFormat("en",{year:U.getFullYear()===R.getFullYear()?void 0:"numeric",month:"short",day:"numeric"}).format(U);return t(_,{children:[w&&t("h2",{class:"timeline-header",children:M}),t(ln,{instance:s,notification:C},C.id)]})})}):t(_,{children:[n==="loading"&&t(_,{children:t("ul",{class:"timeline flat",children:Array.from({length:5}).map((C,L)=>t("li",{class:"notification skeleton",children:[t("div",{class:"notification-type",children:t(k,{icon:"notification",size:"xl"})}),t("div",{class:"notification-content",children:t("p",{children:"███████████ ████"})})]}))})}),n==="error"&&t("p",{class:"ui-state",children:["Unable to load notifications",t("br",{}),t("br",{}),t("button",{type:"button",onClick:()=>I(!0),children:"Try again"})]})]}),o&&t("button",{type:"button",class:"plain block",disabled:n==="loading",onClick:()=>I(),style:{marginBlockEnd:"6em"},children:n==="loading"?t(it,{abrupt:!0}):t(_,{children:"Show more…"})})]})})}function ln({notification:e,instance:s}){var l,m;const{id:i,type:n,status:c,account:o,_accounts:a}=e,h=((l=c==null?void 0:c.reblog)==null?void 0:l.id)||(c==null?void 0:c.id),f=Z.session.get("currentAccount")===(o==null?void 0:o.id),r=(m=c==null?void 0:c.poll)==null?void 0:m.voted,u=n==="poll"?Zt[f?"poll-self":r?"poll-voted":"poll"]:Zt[n];return t("div",{class:`notification ${n}`,tabIndex:"0",children:[t("div",{class:`notification-type notification-${n}`,title:new Date(e.createdAt).toLocaleString(),children:t(k,{icon:{mention:"comment",status:"notification",reblog:"rocket",follow:"follow",follow_request:"follow-add",favourite:"heart",poll:"poll",update:"pencil"}[n]||"notification",size:"xl",alt:n})}),t("div",{class:"notification-content",children:[n!=="mention"&&t(_,{children:[t("p",{children:[!/poll|update/i.test(n)&&t(_,{children:(a==null?void 0:a.length)>1?t(_,{children:[t("b",{children:[a.length," people"]})," "]}):t(_,{children:[t(Ht,{account:o,showAvatar:!0})," "]})}),u,n==="mention"&&t("span",{class:"insignificant",children:[" ","•"," ",t(Ot,{datetime:e.createdAt,format:"micro"})]})]}),n==="follow_request"&&t(rn,{accountID:o.id,onChange:()=>{loadNotifications(!0)}})]}),(a==null?void 0:a.length)>1&&t("p",{class:"avatars-stack",children:a.map((g,y)=>t(_,{children:[t("a",{href:g.url,rel:"noopener noreferrer",onClick:p=>{p.preventDefault(),b.showAccount=g},children:t(kt,{url:g.avatarStatic,size:a.length<=10?"xxl":a.length<100?"xl":a.length<1e3?"l":a.length<2e3?"m":"s",alt:`${g.displayName} @${g.acct}`},g.id)})," "]}))}),c&&t(j,{class:`status-link status-type-${n}`,to:s?`/${s}/s/${h}`:`/s/${h}`,children:t(et,{status:c,size:"s"})})]})]})}function rn({accountID:e,onChange:s}){const{masto:i}=W(),[n,c]=D("default");return t("p",{children:[t("button",{type:"button",disabled:n==="loading",onClick:()=>{c("loading"),(async()=>{try{await i.v1.followRequests.authorize(e),s()}catch{c("default")}})()},children:"Accept"})," ",t("button",{type:"button",disabled:n==="loading",class:"light danger",onClick:()=>{c("loading"),(async()=>{try{await i.v1.followRequests.reject(e),s()}catch{c("default")}})()},children:"Reject"}),t(it,{hidden:n!=="loading"})]})}function dn(e){const s={},i=[];for(let n=0,c=0;n<e.length;n++){const o=e[n],{status:a,account:h,type:d,createdAt:f}=o,r=new Date(f).toLocaleDateString(),u=`${a==null?void 0:a.id}-${d}-${r}`,l=s[u];if(d==="follow_request")i[c++]=o;else if(l!=null&&l.account)l._accounts.push(h);else{let m=s[u]={...o,_accounts:[h]};i[c++]=m}}return i}const he=ie(an),hn=20;function Ft({local:e,...s}){const i=!!e,n=Ct(),{masto:c,instance:o}=W({instance:(s==null?void 0:s.instance)||n.instance}),a=`${i?"Local":"Federated"} timeline (${o})`;st(a,i?"/:instance?/p/l":"/:instance?/p");const h=Lt(),d=H(),f=H();async function r(l){(l||!f.current)&&(f.current=c.v1.timelines.listPublic({limit:hn,local:i}));const m=await f.current.next(),{value:g}=m;return g!=null&&g.length&&l&&(d.current=g[0].id),m}async function u(){try{const l=await c.v1.timelines.listPublic({limit:1,local:i,since_id:d.current}).next(),{value:m}=l;return!!(m!=null&&m.length)}catch{return!1}}return t(wt,{title:a,titleComponent:t("h1",{class:"header-account",children:[t("b",{children:i?"Local timeline":"Federated timeline"}),t("div",{children:o})]}),id:"public",instance:o,emptyText:"No one has posted anything yet.",errorText:"Unable to load posts",fetchItems:r,checkForUpdates:u,headerStart:t(_,{}),headerEnd:t(St,{portal:{target:document.body},overflow:"auto",viewScroll:"close",position:"anchor",boundingBoxPadding:"8 8 8 8",menuButton:t("button",{type:"button",class:"plain",children:t(k,{icon:"more",size:"l"})}),children:[t(dt,{href:i?`/#/${o}/p`:`/#/${o}/p/l`,children:i?t(_,{children:[t(k,{icon:"transfer"})," ",t("span",{children:"Switch to Federated"})]}):t(_,{children:[t(k,{icon:"transfer"})," ",t("span",{children:"Switch to Local"})]})}),t(vt,{}),t(dt,{onClick:()=>{let l=prompt('Enter a new instance e.g. "mastodon.social"');if(!/\./.test(l)){l&&alert("Invalid instance");return}l&&(l=l.toLowerCase().trim(),h(i?`/${l}/p/l`:`/${l}/p`))},children:[t(k,{icon:"bus"})," ",t("span",{children:"Go to another instance…"})]})]})},o+i)}function un(){st("Home","/");const e=at(b),{shortcuts:s}=e,i=s.map(n=>{const{type:c,...o}=n,a={following:Vt,notifications:he,list:de,public:Ft,bookmarks:ae,favourites:le,hashtag:re}[c];return a?t(a,{...o}):null});return ot(["1","2","3","4","5","6","7","8","9"],(n,c)=>{try{const o=parseInt(c.keys[0],10)-1;document.querySelectorAll("#columns > *")[o].focus()}catch{}}),t("div",{id:"columns",children:i})}function fn(){var s;const e=at(b);return E(()=>{(async()=>{const i=await yt.drafts.keys();if(i.length){const n=zt();i.filter(o=>o.startsWith(n)).length&&(b.showDrafts=!0)}})()},[]),t(_,{children:[(e.settings.shortcutsColumnsMode||e.settings.shortcutsViewMode==="multi-column")&&((s=e.shortcuts)!=null&&s.length)?t(un,{}):t(Vt,{title:"Home",path:"/",id:"home",headerStart:!1,headerEnd:t(j,{to:"/notifications",class:`button plain notifications-button ${e.notificationsShowNew?"has-badge":""}`,onClick:i=>{i.stopPropagation()},children:t(k,{icon:"notification",size:"l",alt:"Notifications"})})}),t("button",{type:"button",id:"compose-button",onClick:i=>{i.shiftKey?ve()||(alert("Looks like your browser is blocking popups."),b.showCompose=!0):b.showCompose=!0},children:t(k,{icon:"quill",size:"xl",alt:"Compose"})})]})}const pn=20;function mn({hidden:e}){st("Home","/");const{masto:s,instance:i}=W(),n=at(b),[c,o]=D("default"),[a,h]=D(!1),d=H();async function f(C){var w;C&&(d.current=s.v1.timelines.listHome({limit:pn}),b.homeNew=[]);const L=await d.current.next();if((w=L.value)!=null&&w.length){L.value.sort(($,x)=>{const F=new Date($.createdAt);return new Date(x.createdAt)-F});const M=L.value.map($=>{var x;return pt($,i),{id:$.id,reblog:(x=$.reblog)==null?void 0:x.id,reply:!!$.inReplyToAccountId}});if(n.settings.boostsCarousel){let $=[],x=[],F=0;for(let A=0;A<M.length;A++){const z=M[A];z.reblog?(x.push(z),F++):($.push(z),F<3&&(F=0))}if(x.length>M.length/4||F>=3){const A=x.map(z=>z.id);if(x.length>M.length*3/4)$=[...$,{id:A,boosts:x}];else{const z=Math.floor($.length/2);$=[...$.slice(0,z),{id:A,boosts:x},...$.slice(z)]}}else $=M;C?(b.homeLast=$[0],b.home=$):b.home.push(...$)}else C?(b.homeLast=M[0],b.home=M):b.home.push(...M)}return b.homeLastFetchTime=Date.now(),L}const r=qt(C=>{c!=="loading"&&(o("loading"),(async()=>{try{const{done:L}=await f(C);h(!L),o("default")}catch{o("error")}finally{}})())},1500,{leading:!0,trailing:!1});E(()=>{r(!0)},[]);const u=H(),l=ot("j, shift+j",(C,L)=>{var x,F;const w=document.activeElement.closest(".status-link, .status-boost-link"),M=w==null?void 0:w.getBoundingClientRect(),$=Array.from(u.current.querySelectorAll(".status-link, .status-boost-link"));if(w&&M.top<u.current.clientHeight&&M.bottom>0){const A=$.indexOf(w);let z=$[A+1];L.shift&&(z=$.find((K,J)=>J>A&&!K.classList.contains("status-boost-link"))),z&&(z.focus(),(x=z.scrollIntoViewIfNeeded)==null||x.call(z))}else{const A=$.find(z=>{const K=z.getBoundingClientRect();return K.top>=44&&K.left>=0});A&&(A.focus(),(F=A.scrollIntoViewIfNeeded)==null||F.call(A))}}),m=ot("k, shift+k",(C,L)=>{var x,F;const w=document.activeElement.closest(".status-link, .status-boost-link"),M=w==null?void 0:w.getBoundingClientRect(),$=Array.from(u.current.querySelectorAll(".status-link, .status-boost-link"));if(w&&M.top<u.current.clientHeight&&M.bottom>0){const A=$.indexOf(w);let z=$[A-1];L.shift&&(z=$.findLast((K,J)=>J<A&&!K.classList.contains("status-boost-link"))),z&&(z.focus(),(x=z.scrollIntoViewIfNeeded)==null||x.call(z))}else{const A=$.find(z=>{const K=z.getBoundingClientRect();return K.top>=44&&K.left>=0});A&&(A.focus(),(F=A.scrollIntoViewIfNeeded)==null||F.call(A))}}),g=ot(["enter","o"],()=>{const C=document.activeElement.closest(".status-link, .status-boost-link");C&&C.click()}),{scrollDirection:y,reachStart:p,nearReachStart:I,nearReachEnd:R,reachEnd:S}=It({scrollableElement:u.current,distanceFromEnd:3,scrollThresholdStart:44});E(()=>{(R||S&&a)&&r()},[R,S]),E(()=>{p&&r(!0)},[p]),E(()=>{(async()=>{const C=await yt.drafts.keys();if(C.length){const L=zt();C.filter(M=>M.startsWith(L)).length&&(b.showDrafts=!0)}})()},[]);const[U,V]=D(!1);return E(()=>{const C=n.homeNew.length>0&&p;V(C)},[n.homeNew.length,p]),t(_,{children:[t("div",{id:"home-page",class:"deck-container",hidden:e,ref:C=>{u.current=C,l.current=C,m.current=C,g.current=C},tabIndex:"-1",children:t("div",{class:"timeline-deck deck",children:[t("header",{hidden:y==="end"&&!I,onClick:()=>{var C;(C=u.current)==null||C.scrollTo({top:0,behavior:"smooth"})},onDblClick:()=>{r(!0)},children:[t("div",{class:"header-grid",children:[t("div",{class:"header-side",children:t("button",{type:"button",class:"plain",onClick:C=>{C.preventDefault(),C.stopPropagation(),b.showSettings=!0},children:t(k,{icon:"gear",size:"l",alt:"Settings"})})}),t("h1",{children:"Home"}),t("div",{class:"header-side",children:[t(it,{hidden:c!=="loading"})," ",t(j,{to:"/notifications",class:`button plain ${n.notificationsNew.length>0?"has-badge":""}`,onClick:C=>{C.stopPropagation()},children:t(k,{icon:"notification",size:"l",alt:"Notifications"})})]})]}),n.homeNew.length>0&&c!=="loading"&&(y==="start"&&!I&&!R||U)&&t("button",{class:"updates-button",type:"button",onClick:()=>{var C;if(!n.settings.boostsCarousel){const L=n.homeNew.filter(w=>!b.home.some(M=>M.id===w.id));b.home.unshift(...L)}r(!0),b.homeNew=[],(C=u.current)==null||C.scrollTo({top:0,behavior:"smooth"})},children:[t(k,{icon:"arrow-up"})," New posts"]})]}),n.home.length?t(_,{children:[t("ul",{class:"timeline",children:[n.home.map(({id:C,reblog:L,boosts:w})=>{const M=L||C;return w?t("li",{children:t(gn,{boosts:w})},C):t("li",{children:t(j,{class:"status-link",to:`/s/${M}`,children:t(et,{statusID:C})})},C)}),a&&c==="loading"&&t(_,{children:[t("li",{style:{height:"20vh"},children:t(et,{skeleton:!0})}),t("li",{style:{height:"25vh"},children:t(et,{skeleton:!0})})]})]}),c==="default"&&(a?t("button",{type:"button",class:"plain block",onClick:()=>r(),style:{marginBlockEnd:"6em"},children:"Show more…"}):t("p",{class:"ui-state insignificant",children:"The end."}))]}):c==="loading"?t("ul",{class:"timeline",children:Array.from({length:5}).map((C,L)=>t("li",{children:t(et,{skeleton:!0})},L))}):c!=="error"&&t("p",{class:"ui-state",children:"Nothing to see here."}),c==="error"&&t("p",{class:"ui-state",children:["Unable to load statuses",t("br",{}),t("br",{}),t("button",{type:"button",onClick:()=>{r(!0)},children:"Try again"})]})]})}),t("button",{hidden:y==="end"&&!I,type:"button",id:"compose-button",onClick:C=>{C.shiftKey?openCompose()||(alert("Looks like your browser is blocking popups."),b.showCompose=!0):b.showCompose=!0},children:t(k,{icon:"quill",size:"xxl",alt:"Compose"})})]})}function gn({boosts:e}){const s=H(),{reachStart:i,reachEnd:n,init:c}=It({scrollableElement:s.current,direction:"horizontal"});return E(()=>{c==null||c()},[]),t("div",{class:"boost-carousel",children:[t("header",{children:[t("h3",{children:[e.length," Boosts"]}),t("span",{children:[t("button",{type:"button",class:"small plain2",disabled:i,onClick:()=>{var o,a;(a=s.current)==null||a.scrollBy({left:-Math.min(320,(o=s.current)==null?void 0:o.offsetWidth),behavior:"smooth"})},children:t(k,{icon:"chevron-left"})})," ",t("button",{type:"button",class:"small plain2",disabled:n,onClick:()=>{var o,a;(a=s.current)==null||a.scrollBy({left:Math.min(320,(o=s.current)==null?void 0:o.offsetWidth),behavior:"smooth"})},children:t(k,{icon:"chevron-right"})})]})]}),t("ul",{ref:s,children:e.map(o=>{const{id:a,reblog:h}=o;return t("li",{children:t(j,{class:"status-boost-link",to:`/s/${h||a}`,children:t(et,{statusID:a,size:"s"})})},a)})})]})}const bn=ie(mn);function wn(){const{masto:e}=W();st("Lists","/l");const[s,i]=D("default"),[n,c]=D([]);return E(()=>{i("loading"),(async()=>{try{const o=await e.v1.lists.list();c(o),i("default")}catch{i("error")}})()},[]),t("div",{id:"lists-page",class:"deck-container",children:t("div",{class:"timeline-deck deck",children:[t("header",{children:t("div",{class:"header-grid",children:[t("div",{class:"header-side",children:[t($t,{}),t(j,{to:"/",class:"button plain",children:t(k,{icon:"home",size:"l"})})]}),t("h1",{children:"Lists"}),t("div",{class:"header-side"})]})}),t("main",{children:n.length>0?t("ul",{class:"link-list",children:n.map(o=>t("li",{children:t(j,{to:`/l/${o.id}`,children:[t(k,{icon:"list"})," ",t("span",{children:o.title})]})}))}):s==="loading"?t("p",{class:"ui-state",children:t(it,{})}):s==="error"?t("p",{class:"ui-state",children:"Unable to load lists."}):t("p",{class:"ui-state",children:"No lists yet."})})]})})}const yn="/assets/instances-a659da91.json",{VITE_CLIENT_NAME:vn,VITE_WEBSITE:kn}={VITE_CLIENT_NAME:"Phanpy",VITE_WEBSITE:"https://phanpy.social",VITE_APP_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function Sn({instanceURL:e}){const s=new URLSearchParams({client_name:vn,redirect_uris:location.origin,scopes:"read write follow",website:kn});return await(await fetch(`https://${e}/api/v1/apps`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()})).json()}async function Cn({instanceURL:e,client_id:s}){const i=new URLSearchParams({client_id:s,scope:"read write follow",redirect_uri:location.origin,response_type:"code"});return`https://${e}/oauth/authorize?${i.toString()}`}async function In({instanceURL:e,client_id:s,client_secret:i,code:n}){const c=new URLSearchParams({client_id:s,client_secret:i,redirect_uri:location.origin,grant_type:"authorization_code",code:n,scope:"read write follow"});return await(await fetch(`https://${e}/oauth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()})).json()}function Tn(){st("Log in");const e=H(),s=Z.local.get("instanceURL"),[i,n]=D("default"),[c,o]=D([]);return E(()=>{(async()=>{try{const d=await(await fetch(yn)).json();o(d)}catch{}})()},[]),E(()=>{s&&(e.current.value=s.toLowerCase())},[]),t("main",{id:"login",style:{textAlign:"center"},children:t("form",{onSubmit:h=>{h.preventDefault();const{elements:d}=h.target;let f=d.instanceURL.value.toLowerCase();f=f.replace(/^https?:\/\//,"").replace(/\/+$/,""),f=f.replace(/^@?[^@]+@/,""),Z.local.set("instanceURL",f),(async()=>{n("loading");try{const{client_id:r,client_secret:u}=await Sn({instanceURL:f});r&&u?(Z.session.set("clientID",r),Z.session.set("clientSecret",u),location.href=await Cn({instanceURL:f,client_id:r})):alert("Failed to register application"),n("default")}catch{n("error")}})()},children:[t("h1",{children:"Log in"}),t("label",{children:[t("p",{children:"Instance"}),t("input",{required:!0,type:"text",class:"large",id:"instanceURL",ref:e,disabled:i==="loading",list:"instances-list",autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:!1}),t("datalist",{id:"instances-list",children:c.map(h=>t("option",{value:h}))})]}),i==="error"&&t("p",{class:"error",children:"Failed to log in. Please try again or another instance."}),t("p",{children:[t("button",{class:"large",disabled:i==="loading",children:"Log in"})," "]}),t(it,{hidden:i!=="loading"}),t("hr",{}),t("p",{children:t("a",{href:"https://joinmastodon.org/servers",target:"_blank",children:"Don't have an account? Create one!"})}),t("p",{children:t(j,{to:"/",children:"Go home"})})]})})}function xn(e){const s=Ct(),{masto:i,instance:n,authenticated:c}=W({instance:s.instance}),[o,a]=D("default"),[h,d]=Re(),f=H(),r=(e==null?void 0:e.query)||h.get("q");st(r?`Search: ${r}`:"Search","/search");const[u,l]=D([]),[m,g]=D([]),[y,p]=D([]);return E(()=>{var I,R;(R=(I=f.current)==null?void 0:I.focus)==null||R.call(I),r&&(f.current.value=r,a("loading"),(async()=>{const S=await i.v2.search({q:r,limit:20,resolve:c});l(S.statuses),g(S.accounts),p(S.hashtags),a("default")})())},[r,n]),t("div",{id:"search-page",class:"deck-container",children:t("div",{class:"timeline-deck deck",children:[t("header",{children:t("div",{class:"header-grid",children:[t("div",{class:"header-side",children:t($t,{})}),t("form",{onSubmit:I=>{I.preventDefault();const{q:R}=I.target;R.value?d({q:R.value}):d({})},children:t("input",{ref:f,name:"q",type:"search",autofocus:!0,placeholder:"Search",onSearch:I=>{I.target.value||d({})}})}),t("div",{class:"header-side"})]})}),t("main",{children:r&&o!=="loading"?t(_,{children:[t("h2",{class:"timeline-header",children:"Accounts"}),m.length>0?t("ul",{class:"timeline flat accounts-list",children:m.map(I=>t("li",{children:t(Pt,{account:I,instance:n})}))}):t("p",{class:"ui-state",children:"No accounts found."}),t("h2",{class:"timeline-header",children:"Hashtags"}),y.length>0?t("ul",{class:"link-list hashtag-list",children:y.map(I=>t("li",{children:t(j,{to:n?`/${n}/t/${I.name}`:`/t/${I.name}`,children:[t(k,{icon:"hashtag"}),t("span",{children:I.name})]})}))}):t("p",{class:"ui-state",children:"No hashtags found."}),t("h2",{class:"timeline-header",children:"Posts"}),u.length>0?t("ul",{class:"timeline",children:u.map(I=>t("li",{children:t(j,{class:"status-link",to:n?`/${n}/s/${I.id}`:`/s/${I.id}`,children:t(et,{status:I})})}))}):t("p",{class:"ui-state",children:"No posts found."})]}):o==="loading"?t("p",{class:"ui-state",children:t(it,{abrupt:!0})}):t("p",{class:"ui-state",children:"Enter your search term or paste a URL above to get started."})})]})})}const ue="/assets/logo-f0531a6b.svg";function Ln({onClose:e}){const{masto:s}=W(),i=at(b),n=Z.local.getJSON("accounts"),c=Z.session.get("currentAccount"),o=Z.local.get("theme")||"auto",a=H(),h=n.length>1,[d,f]=D(0),[r,u]=ne(l=>l+1,0);return t("div",{id:"settings-container",class:"sheet",tabIndex:"-1",children:t("main",{children:[t("h2",{children:"Accounts"}),t("section",{children:[t("ul",{class:"accounts-list",children:n.map((l,m)=>{const g=l.info.id===c,y=m===(d||0);return t("li",{children:[t("div",{children:[h&&t("span",{class:`current ${g?"is-current":""}`,children:t(k,{icon:"check-circle",alt:"Current"})}),t(kt,{url:l.info.avatarStatic,size:"xxl",onDblClick:async()=>{if(g)try{const p=await s.v1.accounts.fetch(l.info.id);l.info=p,Z.local.setJSON("accounts",n),u()}catch{}}}),t(Ht,{account:l.info,showAcct:!0,onClick:()=>{b.showAccount=`${l.info.username}@${l.instanceURL}`}})]}),t("div",{class:"actions",children:[y&&h&&t(_,{children:[t("span",{class:"tag",children:"Default"})," "]}),!g&&t("button",{type:"button",class:"light",onClick:()=>{Z.session.set("currentAccount",l.info.id),location.reload()},children:[t(k,{icon:"transfer"})," Switch"]}),t(St,{align:"end",menuButton:t("button",{type:"button",title:"More",class:"plain more-button",children:t(k,{icon:"more",size:"l",alt:"More"})}),children:[h&&t(dt,{disabled:y,onClick:()=>{n.splice(m,1),n.unshift(l),Z.local.setJSON("accounts",n),f(m)},children:"Set as default"}),t(dt,{disabled:!g,onClick:()=>{confirm("Log out?")&&(n.splice(m,1),Z.local.setJSON("accounts",n),location.href="/")},children:"Log out"})]})]})]},m+l.id)})}),h&&t("p",{children:t("small",{children:["Note: ",t("i",{children:"Default"})," account will always be used for first load. Switched accounts will persist during the session."]})}),t("p",{style:{textAlign:"end"},children:t(j,{to:"/login",class:"button",onClick:e,children:"Add new account"})})]}),t("h2",{children:"Settings"}),t("ul",{class:"section",children:[t("li",{children:[t("div",{children:t("label",{children:"Appearance"})}),t("div",{children:t("form",{ref:a,onInput:l=>{l.preventDefault();const g=new FormData(a.current).get("theme"),y=document.documentElement;g==="auto"?y.classList.remove("is-light","is-dark"):(y.classList.toggle("is-light",g==="light"),y.classList.toggle("is-dark",g==="dark")),document.querySelector('meta[name="color-scheme"]').setAttribute("content",g==="auto"?"dark light":g),g==="auto"?Z.local.del("theme"):Z.local.set("theme",g)},children:t("div",{class:"radio-group",children:[t("label",{children:[t("input",{type:"radio",name:"theme",value:"light",defaultChecked:o==="light"}),t("span",{children:"Light"})]}),t("label",{children:[t("input",{type:"radio",name:"theme",value:"dark",defaultChecked:o==="dark"}),t("span",{children:"Dark"})]}),t("label",{children:[t("input",{type:"radio",name:"theme",value:"auto",defaultChecked:o!=="light"&&o!=="dark"}),t("span",{children:"Auto"})]})]})})})]}),t("li",{children:t("label",{children:[t("input",{type:"checkbox",checked:i.settings.boostsCarousel,onChange:l=>{b.settings.boostsCarousel=l.target.checked}})," ","Boosts carousel (experimental)"]})})]}),t("h2",{children:"Hidden features"}),t("section",{children:t("div",{children:t("button",{type:"button",class:"light",onClick:()=>{b.showDrafts=!0,b.showSettings=!1},children:"Unsent drafts"})})}),t("h2",{children:"About"}),t("section",{children:[t("p",{children:[t("img",{src:ue,alt:"",width:"20",height:"20",style:{aspectRatio:"1/1",verticalAlign:"middle"}})," ",t("a",{href:"https://hachyderm.io/@phanpy",onClick:l=>{l.preventDefault(),b.showAccount="phanpy@hachyderm.io"},children:"@phanpy"}),"."]}),t("p",{children:[t("a",{href:"https://github.com/cheeaun/phanpy",target:"_blank",children:"Built"})," ","by"," ",t("a",{href:"https://mastodon.social/@cheeaun",onClick:l=>{l.preventDefault(),b.showAccount="cheeaun@mastodon.social"},children:"@cheeaun"}),"."," ",t("a",{href:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",target:"_blank",children:"Privacy Policy"}),"."]}),t("p",{children:["Last build: ",t(Ot,{datetime:new Date(1677528993952)})," ",t(_,{children:["(",t("a",{href:"https://github.com/cheeaun/phanpy/commit/1808beb",target:"_blank",children:t("code",{children:"1808beb"})}),")"]})]})]})]})})}const Rt=40,$n=20;let _t={};function fe(e){delete _t[e],delete b.scrollPositions[e]}function Dn(){const{id:e,...s}=Ct(),{masto:i,instance:n}=W({instance:s.instance}),{masto:c,instance:o,authenticated:a}=W(),h=n===o,d=Lt(),f=at(b),[r,u]=D([]),[l,m]=D("default"),g=H(),y=Se(e,n),p=H();E(()=>{var T;(T=p.current)==null||T.focus()},[]),E(()=>{const T=Me(()=>{if(!p.current)return;const{scrollTop:v}=p.current;l!=="loading"&&(b.scrollPositions[e]=v)},50);return p.current.addEventListener("scroll",T,{passive:!0}),T(),()=>{var v;T.cancel(),(v=p.current)==null||v.removeEventListener("scroll",T)}},[e,l!=="loading"]);const I=H(),R=()=>{m("loading");let T;const v=_t[e];if(v){const N=v.filter(P=>b.statuses[y]);u(N)}else u([{id:e}]);return(async()=>{var O,X;const N=()=>Xt(()=>i.v1.statuses.fetch(e),{retries:4}),P=Xt(()=>i.v1.statuses.fetchContext(e),{retries:8}),Y=!!f.statuses[y];let B=f.statuses[y];if(!Y)try{B=await N(),pt(B,n),await new Promise(q=>{setTimeout(q,100)})}catch{m("error");return}try{const q=await P,{ancestors:G,descendants:nt}=q;G.forEach(Q=>{pt(Q,n,{skipThreading:!0})});const lt=[];nt.forEach(Q=>{if(pt(Q,n,{skipThreading:!0}),Q.inReplyToAccountId===Q.account.id)lt.push(Q);else if(Q.inReplyToId===B.id)lt.push(Q);else{const mt=nt.find(gt=>gt.id===Q.inReplyToId);mt&&(mt.__replies||(mt.__replies=[]),mt.__replies.push(Q))}});const Tt=[...G.map(Q=>({id:Q.id,ancestor:!0,accountID:Q.account.id})),{id:e,accountID:B.account.id},...lt.map(Q=>{var mt;return{id:Q.id,accountID:Q.account.id,descendant:!0,thread:Q.account.id===B.account.id,replies:(mt=Q.__replies)==null?void 0:mt.map(gt=>{var jt;return{id:gt.id,account:gt.account,repliesCount:gt.repliesCount,content:gt.content,replies:(jt=gt.__replies)==null?void 0:jt.map(xt=>{var Wt;return{id:xt.id,account:xt.account,repliesCount:xt.repliesCount,content:xt.content,replies:(Wt=xt.__replies)==null?void 0:Wt.map(Dt=>({id:Dt.id,account:Dt.account,repliesCount:Dt.repliesCount,content:Dt.content}))}})}})}})];m("default"),I.current={offsetTop:(O=g.current)==null?void 0:O.offsetTop,scrollTop:(X=p.current)==null?void 0:X.scrollTop},u(Tt),_t[e]=Tt,Ce(B,n)}catch{m("error")}})(),()=>{clearTimeout(T)}};E(R,[e,i]),E(()=>{var v,N;if(!r.length)return;const T=b.scrollPositions[e];if(T)p.current.scrollTop=T;else if(I.current){const P={offsetTop:(v=g.current)==null?void 0:v.offsetTop,scrollTop:(N=p.current)==null?void 0:N.scrollTop},Y=P.offsetTop-I.current.offsetTop+P.scrollTop;p.current.scrollTop=Y}else r.length===1&&(p.current.scrollTop=0);I.current=null},[r]),E(()=>{f.reloadStatusPage<=0||(async()=>{try{const{instanceURL:T}=ee(),v=`https://${T}/api/v1/statuses/${e}/context`;return await(await caches.open("api")).delete(v,{ignoreVary:!0}),R()}catch{}})()},[f.reloadStatusPage]),E(()=>()=>{b.scrollPositions={},b.reloadStatusPage=0,_t={}},[]);const S=f.statuses[y]||f.statuses[e],U=ft(()=>{if(!S)return"";const{account:T}=S,v=document.createElement("div");return v.innerHTML=T.displayName,v.innerText.trim()},[S]),V=ft(()=>{if(!S)return"";const{spoilerText:T,content:v}=S;let N;if(T)N=T;else{const P=document.createElement("div");P.innerHTML=v,N=P.innerText.trim()}return N.length>64&&(N=N.slice(0,64)+"…"),N},[S]);st(U&&V?`${U}: "${V}"`:"Status","/:instance?/s/:id");const C=ft(()=>{const{prevLocation:T}=f,v=((T==null?void 0:T.pathname)||"")+((T==null?void 0:T.search)||"");return!v||Nt("/:instance/s/:id",v)||Nt("/s/:id",v)?"/":v},[]),L=()=>{b.showMediaModal=!1},[w,M]=D(Rt),$=ft(()=>r.length-w,[r.length,w]),x=r.length>$n,F=r.some(T=>T.descendant),A=r.filter(T=>T.ancestor),[z,K]=D(!0),J=qt(K,100),ct=ft(()=>{if(!g.current||z)return null;const{top:T}=g.current.getBoundingClientRect();return T>0?"down":"up"},[z]);ot(["esc","backspace"],()=>{L(),d(C)}),ot("j",()=>{var P,Y;const T=document.activeElement.closest(".status-link, .status-focus"),v=T==null?void 0:T.getBoundingClientRect(),N=Array.from(p.current.querySelectorAll(".status-link:not(details:not([open]) > summary ~ *, details:not([open]) > summary ~ * *), .status-focus:not(details:not([open]) > summary ~ *, details:not([open]) > summary ~ * *)"));if(T&&v.top<p.current.clientHeight&&v.bottom>0){const B=N.indexOf(T);let O=N[B+1];O&&(O.focus(),(P=O.scrollIntoViewIfNeeded)==null||P.call(O))}else{const B=N.find(O=>{const X=O.getBoundingClientRect();return X.top>=44&&X.left>=0});B&&(B.focus(),(Y=B.scrollIntoViewIfNeeded)==null||Y.call(B))}}),ot("k",()=>{var P,Y;const T=document.activeElement.closest(".status-link, .status-focus"),v=T==null?void 0:T.getBoundingClientRect(),N=Array.from(p.current.querySelectorAll(".status-link:not(details:not([open]) > summary ~ *, details:not([open]) > summary ~ * *), .status-focus:not(details:not([open]) > summary ~ *, details:not([open]) > summary ~ * *)"));if(T&&v.top<p.current.clientHeight&&v.bottom>0){const B=N.indexOf(T);let O=N[B-1];O&&(O.focus(),(P=O.scrollIntoViewIfNeeded)==null||P.call(O))}else{const B=N.find(O=>{const X=O.getBoundingClientRect();return X.top>=44&&X.left>=0});B&&(B.focus(),(Y=B.scrollIntoViewIfNeeded)==null||Y.call(B))}}),ot("x",()=>{const T=document.activeElement.closest(".status-link, .status-focus");if(T){const v=T.nextElementSibling;v&&v.tagName.toLowerCase()==="details"&&(v.open=!v.open)}});const{nearReachStart:ht}=It({scrollableElement:p.current,distanceFromStartPx:16});return t("div",{class:"deck-backdrop",children:[t(j,{to:C,onClick:L}),t("div",{tabIndex:"-1",ref:p,class:`status-deck deck contained ${r.length>1?"padded-bottom":""}`,children:[t("header",{class:`${z?"inview":""}`,onDblClick:T=>{b.reloadStatusPage++},children:t("div",{class:"header-grid header-grid-2",children:[t("h1",{children:!z&&S&&l!=="loading"?t(_,{children:[t("span",{class:"hero-heading",children:[t(Ht,{account:S.account,instance:n,showAvatar:!0,short:!0})," ",t("span",{class:"insignificant",children:["•"," ",t(Ot,{datetime:S.createdAt,format:"micro"})]})]})," ",t("button",{type:"button",class:"ancestors-indicator light small",onClick:T=>{T.preventDefault(),T.stopPropagation(),g.current.scrollIntoView({behavior:"smooth",block:"start"})},children:t(k,{icon:ct==="down"?"arrow-down":"arrow-up"})})]}):t(_,{children:["Status"," ",t("button",{type:"button",class:"ancestors-indicator light small",onClick:T=>{T.preventDefault(),T.stopPropagation(),p.current.scrollTo({top:0,behavior:"smooth"})},hidden:!A.length||ht,children:[t(k,{icon:"arrow-up"}),t(k,{icon:"comment"})," ",t("span",{class:"insignificant",children:bt(A.length)})]})]})}),t("div",{class:"header-side",children:[l==="loading"?t(it,{abrupt:!0}):t(St,{align:"end",portal:{target:p.current},menuButton:t("button",{type:"button",class:"button plain4",children:t(k,{icon:"more",alt:"Actions",size:"xl"})}),children:t(dt,{onClick:()=>{Array.from(p.current.querySelectorAll("button.spoiler:not(.spoiling)")).forEach(v=>{v.click()})},children:[t(k,{icon:"eye-open"})," ",t("span",{children:"Show all sensitive content"})]})}),t(j,{class:"button plain deck-close",to:C,onClick:L,children:t(k,{icon:"x",size:"xl"})})]})]})}),r.length&&S?t("ul",{class:`timeline flat contextual grow ${l==="loading"?"loading":""}`,children:[r.slice(0,w).map(T=>{const{id:v,ancestor:N,descendant:P,thread:Y,replies:B}=T,O=v===e;return t("li",{ref:O?g:null,class:`${N?"ancestor":""} ${P?"descendant":""} ${Y?"thread":""} ${O?"hero":""}`,children:[O?t(_,{children:[t(oe,{threshold:.1,onChange:J,class:"status-focus",tabIndex:0,children:t(et,{statusID:v,instance:n,withinContext:!0,size:"l"})}),l!=="loading"&&!a?t("div",{class:"post-status-banner",children:[t("p",{children:"You're not logged in. Interactions (reply, boost, etc) are not possible."}),t(j,{to:"/login",class:"button",children:"Log in"})]}):!h&&t("div",{class:"post-status-banner",children:[t("p",{children:["This post is from another instance (",t("b",{children:n}),"). Interactions (reply, boost, etc) are not possible."]}),t("button",{type:"button",onClick:()=>{(async()=>{try{const X=await c.v2.search({q:S.url,type:"statuses",resolve:!0,limit:1});if(X.statuses.length){const q=X.statuses[0];d(o?`/${o}/s/${q.id}`:`/s/${q.id}`)}else throw new Error("No results")}catch(X){alert("Error: "+X)}})()},children:[t(k,{icon:"transfer"})," Switch to my instance to enable interactions"]})]})]}):t(j,{class:"status-link",to:n?`/${n}/s/${v}`:`/s/${v}`,onClick:()=>{fe(v)},children:t(et,{statusID:v,instance:n,withinContext:!0,size:Y||N?"m":"s"})}),P&&(B==null?void 0:B.length)>0&&t(pe,{instance:n,hasManyStatuses:x,replies:B,hasParentThread:Y}),l==="loading"&&O&&!!(S!=null&&S.repliesCount)&&!F&&t("div",{class:"status-loading",children:t(it,{})}),l==="error"&&O&&!!(S!=null&&S.repliesCount)&&!F&&t("div",{class:"status-error",children:["Unable to load replies.",t("br",{}),t("button",{type:"button",class:"plain",onClick:()=>{b.reloadStatusPage++},children:"Try again"})]})]},v)}),$>0&&t("li",{children:t("button",{type:"button",class:"plain block",disabled:l==="loading",onClick:()=>M(T=>T+Rt),style:{marginBlockEnd:"6em"},children:["Show more…"," ",t("span",{class:"tag",children:$>Rt?`${Rt}+`:$})]})})]}):t(_,{children:[l==="loading"&&t("ul",{class:"timeline flat contextual grow loading",children:t("li",{children:t(et,{skeleton:!0,size:"l"})})}),l==="error"&&t("p",{class:"ui-state",children:["Unable to load status",t("br",{}),t("br",{}),t("button",{type:"button",onClick:()=>{b.reloadStatusPage++},children:"Try again"})]})]})]})]})}function pe({hasManyStatuses:e,replies:s,instance:i,hasParentThread:n}){let c=!1;s.length<=2&&(s.some(u=>{var l;return u.repliesCount>0||((l=u.replies)==null?void 0:l.length)>0})||(c=s.reduce((l,m)=>{const{content:g}=m,y=ke(g);return l+y},0)<500));const o=r=>r.reduce((u,l)=>{const{repliesCount:m,replies:g}=l,y=(g==null?void 0:g.length)||m;return u+y+o(g||[])},0),a=s.length+o(s),h=s.length===a,d=s.map(r=>r.account).filter((r,u,l)=>l.findIndex(m=>m.id===r.id)===u).slice(0,3),f=(!n||s.length===1)&&(c||!e);return t("details",{class:"replies",open:f,children:[t("summary",{hidden:f,children:[t("span",{class:"avatars",children:d.map(r=>t(kt,{url:r.avatarStatic,title:`${r.displayName} @${r.username}`},r.id))}),t("span",{children:[t("span",{title:s.length,children:bt(s.length)})," ","repl",s.length===1?"y":"ies"]}),!h&&a>1&&t(_,{children:[" ","·"," ",t("span",{children:[t("span",{title:a,children:bt(a)})," ","comment",a===1?"":"s"]})]})]}),t("ul",{children:s.map(r=>{var u,l;return t("li",{children:[t(j,{class:"status-link",to:i?`/${i}/s/${r.id}`:`/s/${r.id}`,onClick:()=>{fe(r.id)},children:[t(et,{statusID:r.id,instance:i,withinContext:!0,size:"s"}),!((u=r.replies)!=null&&u.length)&&r.repliesCount>0&&t("div",{class:"replies-link",children:[t(k,{icon:"comment"})," ",t("span",{title:r.repliesCount,children:bt(r.repliesCount)})]})]}),((l=r.replies)==null?void 0:l.length)&&t(pe,{instance:i,hasManyStatuses:e,replies:r.replies})]},r.id)})})]})}function te(){return st(null,["/","/welcome"]),t("main",{id:"welcome",children:[t("h1",{children:[t("img",{src:ue,alt:"",width:"24",height:"24",style:{aspectRatio:"1/1"}})," ","Phanpy"]}),t("h2",{children:["Trunk-tastic",t("br",{}),"Mastodon Experience"]}),t("p",{children:"A minimalistic opinionated Mastodon web client."}),t("p",{children:t("big",{children:t("b",{children:t(j,{to:"/login",class:"button",children:"Log in"})})})}),t("hr",{}),t("p",{children:[t("a",{href:"https://github.com/cheeaun/phanpy",target:"_blank",children:"Built"})," ","by"," ",t("a",{href:"https://mastodon.social/@cheeaun",target:"_blank",onClick:e=>{e.preventDefault(),b.showAccount="cheeaun@mastodon.social"},children:"@cheeaun"}),"."," ",t("a",{href:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",target:"_blank",children:"Privacy Policy"}),"."]})]})}window.__STATES__=b;function Rn(){var I,R,S,U,V,C,L;const e=at(b),[s,i]=D(!1),[n,c]=D("loading"),o=Lt();se(()=>{const w=Z.local.get("theme");w&&(document.documentElement.classList.add(`is-${w}`),document.querySelector('meta[name="color-scheme"]').setAttribute("content",w==="auto"?"dark light":w))},[]),E(()=>{const w=Z.local.get("instanceURL"),M=(window.location.search.match(/code=([^&]+)/)||[])[1];if(M){window.history.replaceState({},document.title,"/");const $=Z.session.get("clientID"),x=Z.session.get("clientSecret");(async()=>{c("loading");const{access_token:F}=await In({instanceURL:w,client_id:$,client_secret:x,code:M}),A=Te({instance:w,accessToken:F});await Promise.allSettled([Kt(A),xe(A,w,F)]),Gt(A),i(!0),c("default")})()}else{const $=ee();if($){Z.session.set("currentAccount",$.info.id);const{masto:x}=W({account:$});Gt(x),c("loading"),(async()=>{try{await Kt(x)}catch{}finally{i(!0),c("default")}})()}else c("default")}},[]);let a=_e();b.currentLocation=a.pathname;const h={"/":"home-page","/notifications":"notifications-page"},d=()=>{let w=setTimeout(()=>{const M=document.getElementById(h[a.pathname]);M&&M.focus()},100);return()=>clearTimeout(w)};E(d,[a]);const f=e.showCompose||e.showSettings||e.showAccount||e.showDrafts||e.showMediaModal||e.showShortcutsSettings;E(()=>{f||d()},[f]);const[r,u]=D(!0);ce(u);const l=H();E(()=>{if(s&&r){const{masto:w,instance:M}=W();(async()=>{if(b.notificationsLast){const $=w.v1.notifications.list({limit:1,since_id:b.notificationsLast.id}),{value:x}=await $.next();x!=null&&x.length&&(b.notificationsShowNew=!0)}l.current=await w.ws.stream("/api/v1/streaming",{stream:"user:notification"}),l.current.on("notification",$=>{$.status&&pt($.status,M,{skipThreading:!0}),b.notificationsShowNew=!0}),l.current.ws.onclose=()=>{}})()}return()=>{l.current&&(l.current.ws.close(),l.current=null)}},[r,s]);const{prevLocation:m}=e,g=H(m||null);Nt("/:instance/s/:id",a.pathname)||Nt("/s/:id",a.pathname)?g.current||(g.current=m):g.current=null;const p=ft(()=>{const{pathname:w}=a;return!/^\/(login|welcome)/.test(w)},[a]);return t(_,{children:[t(Et,{location:p||a,children:[t(tt,{path:"/",element:s?t(fn,{}):n==="loading"?t(it,{}):t(te,{})}),t(tt,{path:"/login",element:t(Tn,{})}),t(tt,{path:"/welcome",element:t(te,{})})]}),t(Et,{location:g.current||a,children:[s&&t(tt,{path:"/notifications",element:t(he,{})}),s&&t(tt,{path:"/following",element:t(Vt,{})}),s&&t(tt,{path:"/homev1",element:t(bn,{})}),s&&t(tt,{path:"/b",element:t(ae,{})}),s&&t(tt,{path:"/f",element:t(le,{})}),s&&t(tt,{path:"/l",children:[t(tt,{index:!0,element:t(wn,{})}),t(tt,{path:":id",element:t(de,{})})]}),s&&t(tt,{path:"/ft",element:t(tn,{})}),t(tt,{path:"/:instance?/t/:hashtag",element:t(re,{})}),t(tt,{path:"/:instance?/a/:id",element:t(Je,{})}),t(tt,{path:"/:instance?/p",children:[t(tt,{index:!0,element:t(Ft,{})}),t(tt,{path:"l",element:t(Ft,{local:!0})})]}),t(tt,{path:"/:instance?/search",element:t(xn,{})})]}),t(Et,{children:t(tt,{path:"/:instance?/s/:id",element:t(Dn,{})})}),(!e.settings.shortcutsColumnsMode||e.settings.shortcutsViewMode!=="multi-column")&&t(We,{}),!!e.showCompose&&t(ut,{children:t(Ie,{replyToStatus:typeof e.showCompose!="boolean"?e.showCompose.replyToStatus:((I=window.__COMPOSE__)==null?void 0:I.replyToStatus)||null,editStatus:((R=b.showCompose)==null?void 0:R.editStatus)||((S=window.__COMPOSE__)==null?void 0:S.editStatus)||null,draftStatus:((U=b.showCompose)==null?void 0:U.draftStatus)||((V=window.__COMPOSE__)==null?void 0:V.draftStatus)||null,onClose:w=>{const{newStatus:M,instance:$}=w||{};b.showCompose=!1,window.__COMPOSE__=null,M&&(b.reloadStatusPage++,Mt({text:"Status posted. Check it out.",delay:1e3,duration:1e4,onClick:x=>{x.hideToast(),b.prevLocation=a,o($?`/${$}/s/${M.id}`:`/s/${M.id}`)}}))}})}),!!e.showSettings&&t(ut,{onClick:w=>{w.target===w.currentTarget&&(b.showSettings=!1)},children:t(Ln,{onClose:()=>{b.showSettings=!1}})}),!!e.showAccount&&t(ut,{class:"light",onClick:w=>{w.target===w.currentTarget&&(b.showAccount=!1)},children:t(Ee,{account:((C=e.showAccount)==null?void 0:C.account)||e.showAccount,instance:(L=e.showAccount)==null?void 0:L.instance,onClose:()=>{b.showAccount=!1}})}),!!e.showDrafts&&t(ut,{onClick:w=>{w.target===w.currentTarget&&(b.showDrafts=!1)},children:t(Ue,{})}),!!e.showMediaModal&&t(ut,{onClick:w=>{(w.target===w.currentTarget||w.target.classList.contains("media"))&&(b.showMediaModal=!1)},children:t(Be,{mediaAttachments:e.showMediaModal.mediaAttachments,instance:e.showMediaModal.instance,index:e.showMediaModal.index,statusID:e.showMediaModal.statusID,onClose:()=>{b.showMediaModal=!1}})}),!!e.showShortcutsSettings&&t(ut,{onClick:w=>{w.target===w.currentTarget&&(b.showShortcutsSettings=!1)},children:t(Ve,{})})]})}Ne(t(Ae,{children:t(Rn,{})}),document.getElementById("app"));setTimeout(()=>{try{Object.keys(localStorage).forEach(e=>{e.startsWith("iconify")&&localStorage.removeItem(e)}),Object.keys(sessionStorage).forEach(e=>{e.startsWith("iconify")&&sessionStorage.removeItem(e)}),localStorage.removeItem("settings:boostsCarousel")}catch{}},5e3);
//# sourceMappingURL=main-3dca9093.js.map
