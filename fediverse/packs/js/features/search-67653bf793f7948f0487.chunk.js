"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[69],{1104:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var a=t(1565),n=t(2132),r=t(1566),o=t(2),u=t(980),c=(t(6),t(55),t(9),t(0),t(4),t(93),t(5),t(8),t(641)),i=t(1),d=t(1578),l=t(392),m=t(990),h=t(1017),f=t(192),v=t(52),g=t(85),p=t(477),Z=t(614),y=t(2148),M=function(){var e=(0,y.lv)(15,30);return(0,a.Z)("div",{className:"animate-pulse text-primary-200 dark:text-primary-700"},void 0,(0,a.Z)("p",{},void 0,(0,y._4)(e)))},b=t(475),C=t(3),x=(0,n.vU)({accounts:{id:"search_results.accounts",defaultMessage:"People"},statuses:{id:"search_results.statuses",defaultMessage:"Posts"},hashtags:{id:"search_results.hashtags",defaultMessage:"Hashtags"}}),k=function(){var e,s,n=(0,i.useRef)(null),u=(0,r.Z)(),y=(0,C.TL)(),k=(0,C.CG)((function(e){return e.search.submittedValue})),N=(0,C.CG)((function(e){return e.search.results})),_=(0,C.CG)((function(e){return e.suggestions.items})),G=(0,C.CG)((function(e){return e.trending_statuses.items})),w=(0,C.CG)((function(e){return e.trends.items})),E=(0,C.CG)((function(e){return e.search.submitted})),L=(0,C.CG)((function(e){return e.search.filter})),H=(0,C.CG)((function(e){return e.search.accountId})),T=(0,C.CG)((function(e){var s;return null===(s=e.accounts.get(H))||void 0===s?void 0:s.acct})),U=function(e){return y((0,l.Tv)(e))},I=function(e){var s;return null===(s=P)||void 0===s?void 0:s.keySeq().findIndex((function(s){return s===e}))},S=function(e){if(P){var s=I(e)-1;D(s)}},z=function(e){if(P){var s=I(e)+1;D(s)}},D=function(e){var s;null===(s=n.current)||void 0===s||s.scrollIntoView({index:e,behavior:"smooth",done:function(){var s=document.querySelector('#search-results [data-index="'.concat(e,'"] .focusable'));null==s||s.focus()}})};(0,i.useEffect)((function(){y((0,m.AJ)())}),[]);var q,F,P,V,A=!1,J=b.Z;return"accounts"===L&&(A=N.accountsHasMore,q=N.accountsLoaded,J=Z.Z,N.accounts&&N.accounts.size>0?s=N.accounts.map((function(e){return(0,a.Z)(g.Z,{id:e},e)})):E||!_||_.isEmpty()?q&&(F=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.accounts",defaultMessage:'There are no people results for "{term}"',values:{term:k}}))):s=_.map((function(e){return(0,a.Z)(g.Z,{id:e.account},e.account)}))),"statuses"===L&&(A=N.statusesHasMore,q=N.statusesLoaded,N.statuses&&N.statuses.size>0?(s=N.statuses.map((function(e){return(0,a.Z)(p.Z,{id:e,onMoveUp:S,onMoveDown:z},e)})),P=N.statuses):E||!G||G.isEmpty()?q&&(F=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.statuses",defaultMessage:'There are no posts results for "{term}"',values:{term:k}}))):(s=G.map((function(e){return(0,a.Z)(p.Z,{id:e,onMoveUp:S,onMoveDown:z},e)})),P=G)),"hashtags"===L&&(A=N.hashtagsHasMore,q=N.hashtagsLoaded,J=M,N.hashtags&&N.hashtags.size>0?s=N.hashtags.map((function(e){return(0,a.Z)(h.Z,{hashtag:e},e.name)})):E||!_||_.isEmpty()?q&&(F=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.hashtags",defaultMessage:'There are no hashtags results for "{term}"',values:{term:k}}))):s=w.map((function(e){return(0,a.Z)(h.Z,{hashtag:e},e.name)}))),i.createElement(i.Fragment,null,H?(0,a.Z)(o.Ug,{className:"mb-4 border-b border-solid border-gray-200 px-2 pb-4 dark:border-gray-800",space:2},void 0,(0,a.Z)(f.Z,{iconClassName:"h-5 w-5",src:t(83),onClick:function(){return y((0,l.DH)(null))}}),(0,a.Z)(o.xv,{truncate:!0},void 0,(0,a.Z)(d.Z,{id:"search_results.filter_message",defaultMessage:"You are searching for posts from @{acct}.",values:{acct:(0,a.Z)("strong",{className:"break-words"},void 0,T)}}))):((V=[]).push({text:u.formatMessage(x.accounts),action:function(){return U("accounts")},name:"accounts"},{text:u.formatMessage(x.statuses),action:function(){return U("statuses")},name:"statuses"}),V.push({text:u.formatMessage(x.hashtags),action:function(){return U("hashtags")},name:"hashtags"}),(0,a.Z)(o.mQ,{items:V,activeItem:L})),F||i.createElement(v.Z,{id:"search-results",ref:n,key:L,scrollKey:"".concat(L,":").concat(k),isLoading:E&&!q,showLoading:E&&!q&&(null===(e=s)||void 0===e?void 0:e.isEmpty()),hasMore:A,onLoadMore:function(){return y((0,l.i9)(L))},placeholderComponent:J,placeholderCount:20,className:(0,c.default)({"divide-gray-200 dark:divide-gray-800 divide-solid divide-y":"statuses"===L}),itemClassName:(0,c.default)({"pb-4":"accounts"===L,"pb-3":"hashtags"===L})},s||[]))},N=(0,n.vU)({heading:{id:"column.search",defaultMessage:"Search"}}),_=function(){var e=(0,r.Z)();return(0,a.Z)(o.sg,{label:e.formatMessage(N.heading)},void 0,(0,a.Z)("div",{className:"space-y-4"},void 0,(0,a.Z)(u.Z,{autoFocus:!0,autoSubmit:!0}),(0,a.Z)(k,{})))}}}]);
//# sourceMappingURL=search-67653bf793f7948f0487.chunk.js.map