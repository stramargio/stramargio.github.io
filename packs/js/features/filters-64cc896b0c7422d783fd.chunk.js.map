{"version":3,"file":"packs/js/features/filters-64cc896b0c7422d783fd.chunk.js","mappings":"8OAA4uBA,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,iBAAiB,eAAiB,eAAeC,mBAAmB,CAAC,GAAK,oCAAoC,eAAiB,kBAAkBC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,qBAAqBC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,gBAAgBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,gDAAgDC,cAAc,CAAC,GAAK,+BAA+B,eAAiB,iBAAiBC,gBAAgB,CAAC,GAAK,iCAAiC,eAAiB,mBAAmBC,cAAc,CAAC,GAAK,+BAA+B,eAAiB,iBAAiBC,cAAc,CAAC,GAAK,+BAA+B,eAAiB,iBAAiBC,YAAY,CAAC,GAAK,6BAA6B,eAAiB,wBAAwBC,UAAU,CAAC,GAAK,2BAA2B,eAAiB,+EAA+EC,kBAAkB,CAAC,GAAK,mCAAmC,eAAiB,cAAcC,gBAAgB,CAAC,GAAK,iCAAiC,eAAiB,yGAAyGC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,kBAAkBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,uBAAuBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,yBAAyBC,mBAAmB,CAAC,GAAK,oCAAoC,eAAiB,mBAAmBC,OAAO,CAAC,GAAK,wBAAwB,eAAiB,YAWuuG,UAHnmL,WAAmB,IAAIC,GAAK,SAAcC,GAAS,UAAqBC,GAAQ,SAAe,SAASC,GAAO,OAAOA,EAAMD,OAAQ,IAAOE,GAAU,IAAAC,UAAS,IAAIC,GAAW,OAAeF,EAAU,GAAGG,EAAOD,EAAW,GAAGE,EAAUF,EAAW,GAAOG,GAAW,IAAAJ,UAAS,IAA4CK,GAA7B,OAAeD,EAAW,GAAwB,GAAOE,GAAW,IAAAN,WAAS,GAAMO,GAAW,OAAeD,EAAW,GAAGE,EAAaD,EAAW,GAAGE,EAAgBF,EAAW,GAAOG,GAAW,IAAAV,WAAS,GAAOW,GAAW,OAAeD,EAAW,GAAGE,EAAeD,EAAW,GAAGE,EAAkBF,EAAW,GAAOG,GAAW,IAAAd,WAAS,GAAOe,GAAY,OAAeD,EAAW,GAAG9B,EAAc+B,EAAY,GAAGC,EAAiBD,EAAY,GAAOE,GAAY,IAAAjB,WAAS,GAAOkB,GAAY,OAAeD,EAAY,GAAGhC,EAAciC,EAAY,GAAGC,EAAiBD,EAAY,GAAOE,GAAY,IAAApB,WAAS,GAAOqB,GAAY,OAAeD,EAAY,GAAGE,EAAaD,EAAY,GAAGE,EAAgBF,EAAY,GAAOG,GAAY,IAAAxB,WAAS,GAAMyB,GAAY,OAAeD,EAAY,GAAGE,EAAUD,EAAY,GAAGE,EAAaF,EAAY,GAGnqBG,EAAmB,SAA4BC,GAAGjC,GAAS,QAAaiC,EAAEC,cAAcC,QAAQC,QAAQC,MAAK,WAAW,OAAOrC,GAAS,UAAgB,IAAGsC,OAAM,WAAW,UAAYvC,EAAKwC,cAAc3D,EAASgB,cAAe,GAAG,GAAE,IAAA4C,YAAU,WAAWxC,GAAS,UAAgB,GAAE,IAAI,IAAIyC,GAA0B,OAAK,IAAiB,CAACC,GAAG,uBAAuBC,eAAe,6CAA6C,OAAmB,OAAK,KAAO,CAACC,UAAU,wBAAwBC,MAAM9C,EAAKwC,cAAc3D,EAASC,eAAU,GAAoB,OAAK,KAAW,CAAC,OAAE,GAAoB,OAAK,KAAU,CAACiE,MAAM/C,EAAKwC,cAAc3D,EAASE,wBAAoC,OAAK,KAAK,CAACiE,SAA1mC,SAAsBd,GAAGA,EAAEe,iBAAiB,IAAIC,EAAQ,GAAMrC,GAAcqC,EAAQC,KAAK,QAAYlC,GAAgBiC,EAAQC,KAAK,UAAc9D,GAAe6D,EAAQC,KAAK,iBAAqB7D,GAAe4D,EAAQC,KAAK,UAAWlD,GAAS,QAAaM,EAAOG,EAAUwC,EAAQnB,EAAUJ,IAAeW,MAAK,WAAW,OAAOrC,GAAS,UAAgB,IAAGsC,OAAM,SAASa,GAAO,UAAYpD,EAAKwC,cAAc3D,EAASe,cAAe,GAAG,QAA8sB,GAAoB,OAAK,KAAU,CAACyD,UAAUrD,EAAKwC,cAAc3D,EAASG,eAAU,GAAoB,OAAK,KAAM,CAACsE,UAAS,EAAKC,KAAK,OAAOC,KAAK,SAASC,SAAS,SAAkBC,GAAM,IAAIC,EAAOD,EAAKC,OAAO,OAAOnD,EAAUmD,EAAOtB,MAAO,MAAkB,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAK,CAACuB,IAAI,cAAS,GAAoB,OAAK,IAAiB,CAACjB,GAAG,yBAAyBC,eAAe,sBAAkC,OAAK,KAAK,CAACiB,MAAM,QAAQC,KAAK,WAAM,GAAoB,OAAK,IAAiB,CAACnB,GAAG,uBAAuBC,eAAe,6DAAyE,OAAK,MAAM,CAACC,UAAU,gBAAW,GAAoB,OAAK,KAAS,CAACC,MAAM9C,EAAKwC,cAAc3D,EAASM,eAAeqE,KAAK,gBAAgBO,QAAQlD,EAAa4C,SAAS,SAAkBO,GAAO,IAAIL,EAAOK,EAAML,OAAO,OAAO7C,EAAgB6C,EAAOI,QAAS,KAAiB,OAAK,KAAS,CAACjB,MAAM9C,EAAKwC,cAAc3D,EAASO,iBAAiBoE,KAAK,kBAAkBO,QAAQ9C,EAAewC,SAAS,SAAkBQ,GAAO,IAAIN,EAAOM,EAAMN,OAAO,OAAOzC,EAAkByC,EAAOI,QAAS,KAAiB,OAAK,KAAS,CAACjB,MAAM9C,EAAKwC,cAAc3D,EAASQ,eAAemE,KAAK,gBAAgBO,QAAQ1E,EAAcoE,SAAS,SAAkBS,GAAO,IAAIP,EAAOO,EAAMP,OAAO,OAAOtC,EAAiBsC,EAAOI,QAAS,KAAiB,OAAK,KAAS,CAACjB,MAAM9C,EAAKwC,cAAc3D,EAASS,eAAekE,KAAK,gBAAgBO,QAAQzE,EAAcmE,SAAS,SAAkBU,GAAO,IAAIR,EAAOQ,EAAMR,OAAO,OAAOnC,EAAiBmC,EAAOI,QAAS,OAAmB,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAS,CAACjB,MAAM9C,EAAKwC,cAAc3D,EAASU,aAAa6E,KAAKpE,EAAKwC,cAAc3D,EAASW,WAAWgE,KAAK,eAAeO,QAAQpC,EAAa8B,SAAS,SAAkBY,GAAO,IAAIV,EAAOU,EAAMV,OAAO,OAAO/B,EAAgB+B,EAAOI,QAAS,KAAiB,OAAK,KAAS,CAACjB,MAAM9C,EAAKwC,cAAc3D,EAASY,mBAAmB2E,KAAKpE,EAAKwC,cAAc3D,EAASa,iBAAiB8D,KAAK,aAAaO,QAAQhC,EAAU0B,SAAS,SAAkBa,GAAO,IAAIX,EAAOW,EAAMX,OAAO,OAAO3B,EAAa2B,EAAOI,QAAS,MAAkB,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAO,CAACR,KAAK,SAASM,MAAM,gBAAW,EAAO7D,EAAKwC,cAAc3D,EAASc,aAAyB,OAAK,KAAW,CAAC,OAAE,GAAoB,OAAK,KAAU,CAACoD,MAAM/C,EAAKwC,cAAc3D,EAASiB,wBAAoC,OAAK,IAAe,CAACyE,UAAU,UAAU7B,aAAaA,QAAc,EAAOxC,EAAQsE,KAAI,SAASC,EAAOC,GAAG,OAAmB,OAAK,MAAM,CAAC7B,UAAU,qBAAqB6B,GAAe,OAAK,MAAM,CAAC7B,UAAU,wBAAmB,GAAoB,OAAK,MAAM,CAACA,UAAU,uBAAkB,GAAoB,OAAK,OAAO,CAACA,UAAU,2BAAsB,GAAoB,OAAK,IAAiB,CAACF,GAAG,oCAAoCC,eAAe,yBAAqC,OAAK,OAAO,CAACC,UAAU,2BAAsB,EAAO4B,EAAOlE,UAAsB,OAAK,MAAM,CAACsC,UAAU,yBAAoB,GAAoB,OAAK,OAAO,CAACA,UAAU,2BAAsB,GAAoB,OAAK,IAAiB,CAACF,GAAG,qCAAqCC,eAAe,uBAAmC,OAAK,OAAO,CAACC,UAAU,2BAAsB,EAAO4B,EAAOvB,QAAQsB,KAAI,SAAStB,EAAQwB,GAAG,OAAmB,OAAK,OAAO,CAAC7B,UAAU,WAAW6B,EAAExB,EAAS,OAAkB,OAAK,MAAM,CAACL,UAAU,wBAAmB,GAAoB,OAAK,OAAO,CAACA,UAAU,2BAAsB,GAAoB,OAAK,IAAiB,CAACF,GAAG,qCAAqCC,eAAe,uBAAmC,OAAK,OAAO,CAACC,UAAU,2BAAsB,EAAO4B,EAAO9C,cAA0B,OAAK,OAAO,CAAC,OAAE,GAAoB,OAAK,IAAiB,CAACgB,GAAG,4BAA4BC,eAAe,WAAuB,OAAK,OAAO,CAAC,OAAE,GAAoB,OAAK,IAAiB,CAACD,GAAG,4BAA4BC,eAAe,UAAU6B,EAAOE,aAAyB,OAAK,OAAO,CAAC,OAAE,GAAoB,OAAK,IAAiB,CAAChC,GAAG,kCAAkCC,eAAe,oBAAgC,OAAK,MAAM,CAACC,UAAU,iBAAiB+B,KAAK,SAASC,SAAS,EAAEC,QAAQ7C,EAAmB,aAAawC,EAAO9B,GAAG,aAAa3C,EAAKwC,cAAc3D,EAASkB,cAAS,GAAoB,OAAK,IAAK,CAAC8C,UAAU,sBAAsBkC,IAAI,EAAQ,OAAsC,OAAK,OAAO,CAAClC,UAAU,6BAAwB,GAAoB,OAAK,IAAiB,CAACF,GAAG,8BAA8BC,eAAe,aAAc,KAAK,C","sources":["webpack://soapbox/./app/soapbox/features/filters/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array.map.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchFilters,createFilter,deleteFilter}from'soapbox/actions/filters';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable-list';import{Button,CardHeader,CardTitle,Column,Form,FormActions,FormGroup,Input,Text}from'soapbox/components/ui';import{FieldsGroup,Checkbox}from'soapbox/features/forms';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import toast from'soapbox/toast';var messages=defineMessages({heading:{\"id\":\"column.filters\",\"defaultMessage\":\"Muted words\"},subheading_add_new:{\"id\":\"column.filters.subheading_add_new\",\"defaultMessage\":\"Add New Filter\"},keyword:{\"id\":\"column.filters.keyword\",\"defaultMessage\":\"Keyword or phrase\"},expires:{\"id\":\"column.filters.expires\",\"defaultMessage\":\"Expire after\"},expires_hint:{\"id\":\"column.filters.expires_hint\",\"defaultMessage\":\"Expiration dates are not currently supported\"},home_timeline:{\"id\":\"column.filters.home_timeline\",\"defaultMessage\":\"Home timeline\"},public_timeline:{\"id\":\"column.filters.public_timeline\",\"defaultMessage\":\"Public timeline\"},notifications:{\"id\":\"column.filters.notifications\",\"defaultMessage\":\"Notifications\"},conversations:{\"id\":\"column.filters.conversations\",\"defaultMessage\":\"Conversations\"},drop_header:{\"id\":\"column.filters.drop_header\",\"defaultMessage\":\"Drop instead of hide\"},drop_hint:{\"id\":\"column.filters.drop_hint\",\"defaultMessage\":\"Filtered posts will disappear irreversibly, even if filter is later removed\"},whole_word_header:{\"id\":\"column.filters.whole_word_header\",\"defaultMessage\":\"Whole word\"},whole_word_hint:{\"id\":\"column.filters.whole_word_hint\",\"defaultMessage\":\"When the keyword or phrase is alphanumeric only, it will only be applied if it matches the whole word\"},add_new:{\"id\":\"column.filters.add_new\",\"defaultMessage\":\"Add New Filter\"},create_error:{\"id\":\"column.filters.create_error\",\"defaultMessage\":\"Error adding filter\"},delete_error:{\"id\":\"column.filters.delete_error\",\"defaultMessage\":\"Error deleting filter\"},subheading_filters:{\"id\":\"column.filters.subheading_filters\",\"defaultMessage\":\"Current Filters\"},delete:{\"id\":\"column.filters.delete\",\"defaultMessage\":\"Delete\"}});// const expirations = {\n//   null: 'Never',\n//   // 3600: '30 minutes',\n//   // 21600: '1 hour',\n//   // 43200: '12 hours',\n//   // 86400 : '1 day',\n//   // 604800: '1 week',\n// };\nvar Filters=function Filters(){var intl=useIntl();var dispatch=useAppDispatch();var filters=useAppSelector(function(state){return state.filters;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),phrase=_useState2[0],setPhrase=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,1),expiresAt=_useState4[0];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),homeTimeline=_useState6[0],setHomeTimeline=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),publicTimeline=_useState8[0],setPublicTimeline=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),notifications=_useState10[0],setNotifications=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),conversations=_useState12[0],setConversations=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),irreversible=_useState14[0],setIrreversible=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),wholeWord=_useState16[0],setWholeWord=_useState16[1];// const handleSelectChange = e => {\n//   this.setState({ [e.target.name]: e.target.value });\n// };\nvar handleAddNew=function handleAddNew(e){e.preventDefault();var context=[];if(homeTimeline){context.push('home');}if(publicTimeline){context.push('public');}if(notifications){context.push('notifications');}if(conversations){context.push('thread');}dispatch(createFilter(phrase,expiresAt,context,wholeWord,irreversible)).then(function(){return dispatch(fetchFilters());}).catch(function(error){toast.error(intl.formatMessage(messages.create_error));});};var handleFilterDelete=function handleFilterDelete(e){dispatch(deleteFilter(e.currentTarget.dataset.value)).then(function(){return dispatch(fetchFilters());}).catch(function(){toast.error(intl.formatMessage(messages.delete_error));});};useEffect(function(){dispatch(fetchFilters());},[]);var emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.filters\",defaultMessage:\"You haven't created any muted words yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"filter-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Form,{onSubmit:handleAddNew},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.keyword)},void 0,/*#__PURE__*/_jsx(Input,{required:true,type:\"text\",name:\"phrase\",onChange:function onChange(_ref){var target=_ref.target;return setPhrase(target.value);}})),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_header\",defaultMessage:\"Filter contexts\"})),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"xs\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_hint\",defaultMessage:\"One or multiple contexts where the filter should apply\"})),/*#__PURE__*/_jsx(\"div\",{className:\"two-col\"},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.home_timeline),name:\"home_timeline\",checked:homeTimeline,onChange:function onChange(_ref2){var target=_ref2.target;return setHomeTimeline(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.public_timeline),name:\"public_timeline\",checked:publicTimeline,onChange:function onChange(_ref3){var target=_ref3.target;return setPublicTimeline(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.notifications),name:\"notifications\",checked:notifications,onChange:function onChange(_ref4){var target=_ref4.target;return setNotifications(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.conversations),name:\"conversations\",checked:conversations,onChange:function onChange(_ref5){var target=_ref5.target;return setConversations(target.checked);}}))),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.drop_header),hint:intl.formatMessage(messages.drop_hint),name:\"irreversible\",checked:irreversible,onChange:function onChange(_ref6){var target=_ref6.target;return setIrreversible(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.whole_word_header),hint:intl.formatMessage(messages.whole_word_hint),name:\"whole_word\",checked:wholeWord,onChange:function onChange(_ref7){var target=_ref7.target;return setWholeWord(target.checked);}})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\"},void 0,intl.formatMessage(messages.add_new)))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_filters)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"filters\",emptyMessage:emptyMessage},void 0,filters.map(function(filter,i){return/*#__PURE__*/_jsx(\"div\",{className:\"filter__container\"},i,/*#__PURE__*/_jsx(\"div\",{className:\"filter__details\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"filter__phrase\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_phrase_label\",defaultMessage:\"Keyword or phrase:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.phrase)),/*#__PURE__*/_jsx(\"div\",{className:\"filter__contexts\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_context_label\",defaultMessage:\"Filter contexts:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.context.map(function(context,i){return/*#__PURE__*/_jsx(\"span\",{className:\"context\"},i,context);}))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__details\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_details_label\",defaultMessage:\"Filter settings:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.irreversible?/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_drop\",defaultMessage:\"Drop\"})):/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_hide\",defaultMessage:\"Hide\"})),filter.whole_word&&/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_whole-word\",defaultMessage:\"Whole word\"}))))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__delete\",role:\"button\",tabIndex:0,onClick:handleFilterDelete,\"data-value\":filter.id,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"filter__delete-icon\",src:require('@tabler/icons/x.svg')}),/*#__PURE__*/_jsx(\"span\",{className:\"filter__delete-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_delete\",defaultMessage:\"Delete\"}))));})));};export default Filters;"],"names":["messages","heading","subheading_add_new","keyword","expires","expires_hint","home_timeline","public_timeline","notifications","conversations","drop_header","drop_hint","whole_word_header","whole_word_hint","add_new","create_error","delete_error","subheading_filters","delete","intl","dispatch","filters","state","_useState","useState","_useState2","phrase","setPhrase","_useState3","expiresAt","_useState5","_useState6","homeTimeline","setHomeTimeline","_useState7","_useState8","publicTimeline","setPublicTimeline","_useState9","_useState10","setNotifications","_useState11","_useState12","setConversations","_useState13","_useState14","irreversible","setIrreversible","_useState15","_useState16","wholeWord","setWholeWord","handleFilterDelete","e","currentTarget","dataset","value","then","catch","formatMessage","useEffect","emptyMessage","id","defaultMessage","className","label","title","onSubmit","preventDefault","context","push","error","labelText","required","type","name","onChange","_ref","target","tag","theme","size","checked","_ref2","_ref3","_ref4","_ref5","hint","_ref6","_ref7","scrollKey","map","filter","i","whole_word","role","tabIndex","onClick","src"],"sourceRoot":""}