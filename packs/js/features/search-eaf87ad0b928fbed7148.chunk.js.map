{"version":3,"file":"packs/js/features/search-eaf87ad0b928fbed7148.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/placeholder/components/placeholder-hashtag.tsx","webpack://soapbox/./app/soapbox/features/compose/components/search-results.tsx","webpack://soapbox/./app/soapbox/features/search/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{generateText,randomIntFromInterval}from'../utils';/** Fake hashtag to display while data is loading. */var PlaceholderHashtag=function PlaceholderHashtag(){var length=randomIntFromInterval(15,30);return/*#__PURE__*/_jsx(\"div\",{className:\"animate-pulse text-primary-200 dark:text-primary-700\"},void 0,/*#__PURE__*/_jsx(\"p\",{},void 0,generateText(length)));};export default PlaceholderHashtag;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.search.js\";import\"core-js/modules/es.array.filter.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array.find-index.js\";import\"core-js/modules/es.array.map.js\";import\"core-js/modules/es.array.concat.js\";import clsx from'clsx';import React,{useEffect,useRef}from'react';import{FormattedMessage,defineMessages,useIntl}from'react-intl';import{expandSearch,setFilter,setSearchAccount}from'soapbox/actions/search';import{fetchTrendingStatuses}from'soapbox/actions/trending-statuses';import Hashtag from'soapbox/components/hashtag';import IconButton from'soapbox/components/icon-button';import ScrollableList from'soapbox/components/scrollable-list';import{HStack,Tabs,Text}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account-container';import StatusContainer from'soapbox/containers/status-container';import PlaceholderAccount from'soapbox/features/placeholder/components/placeholder-account';import PlaceholderHashtag from'soapbox/features/placeholder/components/placeholder-hashtag';import PlaceholderStatus from'soapbox/features/placeholder/components/placeholder-status';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({accounts:{\"id\":\"search_results.accounts\",\"defaultMessage\":\"People\"},statuses:{\"id\":\"search_results.statuses\",\"defaultMessage\":\"Posts\"},hashtags:{\"id\":\"search_results.hashtags\",\"defaultMessage\":\"Hashtags\"}});var SearchResults=function SearchResults(){var _searchResults;var node=useRef(null);var intl=useIntl();var dispatch=useAppDispatch();var value=useAppSelector(function(state){return state.search.submittedValue;});var results=useAppSelector(function(state){return state.search.results;});var suggestions=useAppSelector(function(state){return state.suggestions.items;});var trendingStatuses=useAppSelector(function(state){return state.trending_statuses.items;});var trends=useAppSelector(function(state){return state.trends.items;});var submitted=useAppSelector(function(state){return state.search.submitted;});var selectedFilter=useAppSelector(function(state){return state.search.filter;});var filterByAccount=useAppSelector(function(state){return state.search.accountId;});var account=useAppSelector(function(state){var _state$accounts$get;return(_state$accounts$get=state.accounts.get(filterByAccount))===null||_state$accounts$get===void 0?void 0:_state$accounts$get.acct;});var handleLoadMore=function handleLoadMore(){return dispatch(expandSearch(selectedFilter));};var handleUnsetAccount=function handleUnsetAccount(){return dispatch(setSearchAccount(null));};var selectFilter=function selectFilter(newActiveFilter){return dispatch(setFilter(newActiveFilter));};var renderFilterBar=function renderFilterBar(){var items=[];items.push({text:intl.formatMessage(messages.accounts),action:function action(){return selectFilter('accounts');},name:'accounts'},{text:intl.formatMessage(messages.statuses),action:function action(){return selectFilter('statuses');},name:'statuses'});items.push({text:intl.formatMessage(messages.hashtags),action:function action(){return selectFilter('hashtags');},name:'hashtags'});return/*#__PURE__*/_jsx(Tabs,{items:items,activeItem:selectedFilter});};var getCurrentIndex=function getCurrentIndex(id){var _resultsIds;return(_resultsIds=resultsIds)===null||_resultsIds===void 0?void 0:_resultsIds.keySeq().findIndex(function(key){return key===id;});};var handleMoveUp=function handleMoveUp(id){if(!resultsIds)return;var elementIndex=getCurrentIndex(id)-1;selectChild(elementIndex);};var handleMoveDown=function handleMoveDown(id){if(!resultsIds)return;var elementIndex=getCurrentIndex(id)+1;selectChild(elementIndex);};var selectChild=function selectChild(index){var _node$current;(_node$current=node.current)===null||_node$current===void 0?void 0:_node$current.scrollIntoView({index:index,behavior:'smooth',done:function done(){var element=document.querySelector(\"#search-results [data-index=\\\"\".concat(index,\"\\\"] .focusable\"));element===null||element===void 0?void 0:element.focus();}});};useEffect(function(){dispatch(fetchTrendingStatuses());},[]);var searchResults;var hasMore=false;var loaded;var noResultsMessage;var placeholderComponent=PlaceholderStatus;var resultsIds;if(selectedFilter==='accounts'){hasMore=results.accountsHasMore;loaded=results.accountsLoaded;placeholderComponent=PlaceholderAccount;if(results.accounts&&results.accounts.size>0){searchResults=results.accounts.map(function(accountId){return/*#__PURE__*/_jsx(AccountContainer,{id:accountId},accountId);});}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=suggestions.map(function(suggestion){return/*#__PURE__*/_jsx(AccountContainer,{id:suggestion.account},suggestion.account);});}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.accounts\",defaultMessage:\"There are no people results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='statuses'){hasMore=results.statusesHasMore;loaded=results.statusesLoaded;if(results.statuses&&results.statuses.size>0){searchResults=results.statuses.map(function(statusId){return/*#__PURE__*/ (// @ts-ignore\n_jsx(StatusContainer,{id:statusId,onMoveUp:handleMoveUp,onMoveDown:handleMoveDown},statusId));});resultsIds=results.statuses;}else if(!submitted&&trendingStatuses&&!trendingStatuses.isEmpty()){searchResults=trendingStatuses.map(function(statusId){return/*#__PURE__*/ (// @ts-ignore\n_jsx(StatusContainer,{id:statusId,onMoveUp:handleMoveUp,onMoveDown:handleMoveDown},statusId));});resultsIds=trendingStatuses;}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.statuses\",defaultMessage:\"There are no posts results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='hashtags'){hasMore=results.hashtagsHasMore;loaded=results.hashtagsLoaded;placeholderComponent=PlaceholderHashtag;if(results.hashtags&&results.hashtags.size>0){searchResults=results.hashtags.map(function(hashtag){return/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.name);});}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=trends.map(function(hashtag){return/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.name);});}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.hashtags\",defaultMessage:\"There are no hashtags results for \\\"{term}\\\"\",values:{term:value}}));}}return/*#__PURE__*/React.createElement(React.Fragment,null,filterByAccount?/*#__PURE__*/_jsx(HStack,{className:\"mb-4 border-b border-solid border-gray-200 px-2 pb-4 dark:border-gray-800\",space:2},void 0,/*#__PURE__*/_jsx(IconButton,{iconClassName:\"h-5 w-5\",src:require('@tabler/icons/x.svg'),onClick:handleUnsetAccount}),/*#__PURE__*/_jsx(Text,{truncate:true},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"search_results.filter_message\",defaultMessage:\"You are searching for posts from @{acct}.\",values:{acct:/*#__PURE__*/_jsx(\"strong\",{className:\"break-words\"},void 0,account)}}))):renderFilterBar(),noResultsMessage||/*#__PURE__*/React.createElement(ScrollableList,{id:\"search-results\",ref:node,key:selectedFilter,scrollKey:\"\".concat(selectedFilter,\":\").concat(value),isLoading:submitted&&!loaded,showLoading:submitted&&!loaded&&((_searchResults=searchResults)===null||_searchResults===void 0?void 0:_searchResults.isEmpty()),hasMore:hasMore,onLoadMore:handleLoadMore,placeholderComponent:placeholderComponent,placeholderCount:20,className:clsx({'divide-gray-200 dark:divide-gray-800 divide-solid divide-y':selectedFilter==='statuses'}),itemClassName:clsx({'pb-4':selectedFilter==='accounts','pb-3':selectedFilter==='hashtags'})},searchResults||[]));};export default SearchResults;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{Column}from'soapbox/components/ui';import Search from'soapbox/features/compose/components/search';import SearchResults from'soapbox/features/compose/components/search-results';var messages=defineMessages({heading:{\"id\":\"column.search\",\"defaultMessage\":\"Search\"}});var SearchPage=function SearchPage(){var intl=useIntl();return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\"},void 0,/*#__PURE__*/_jsx(Search,{autoFocus:true,autoSubmit:true}),/*#__PURE__*/_jsx(SearchResults,{})));};export default SearchPage;"],"names":["length","className","messages","accounts","statuses","hashtags","_searchResults","searchResults","node","useRef","intl","useIntl","dispatch","value","state","search","submittedValue","results","suggestions","items","trendingStatuses","trending_statuses","trends","submitted","selectedFilter","filter","filterByAccount","accountId","account","_state$accounts$get","get","acct","selectFilter","newActiveFilter","getCurrentIndex","id","_resultsIds","resultsIds","keySeq","findIndex","key","handleMoveUp","elementIndex","selectChild","handleMoveDown","index","_node$current","current","scrollIntoView","behavior","done","element","document","querySelector","concat","focus","useEffect","loaded","noResultsMessage","hasMore","placeholderComponent","accountsHasMore","accountsLoaded","size","map","isEmpty","defaultMessage","values","term","suggestion","statusesHasMore","statusesLoaded","statusId","onMoveUp","onMoveDown","hashtagsHasMore","hashtagsLoaded","hashtag","name","space","iconClassName","src","onClick","truncate","push","text","formatMessage","action","activeItem","ref","scrollKey","isLoading","showLoading","onLoadMore","placeholderCount","itemClassName","heading","label","autoFocus","autoSubmit"],"sourceRoot":""}