{"version":3,"file":"packs/js/features/status-f2fba89587b28e394970.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/status/index.tsx"],"sourcesContent":["import _typeof from\"@babel/runtime/helpers/esm/typeof\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.concat.js\";import\"regenerator-runtime/runtime.js\";import debounce from'lodash/debounce';import React,{useCallback,useEffect,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{Redirect}from'react-router-dom';import{fetchStatusWithContext,fetchNext}from'soapbox/actions/statuses';import MissingIndicator from'soapbox/components/missing-indicator';import PullToRefresh from'soapbox/components/pull-to-refresh';import{Column}from'soapbox/components/ui';import PlaceholderStatus from'soapbox/features/placeholder/components/placeholder-status';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import{makeGetStatus}from'soapbox/selectors';import Thread from'./components/thread';var messages=defineMessages({title:{\"id\":\"status.title\",\"defaultMessage\":\"Post Details\"},titleDirect:{\"id\":\"status.title_direct\",\"defaultMessage\":\"Direct message\"},deleteConfirm:{\"id\":\"confirmations.delete.confirm\",\"defaultMessage\":\"Delete\"},deleteHeading:{\"id\":\"confirmations.delete.heading\",\"defaultMessage\":\"Delete post\"},deleteMessage:{\"id\":\"confirmations.delete.message\",\"defaultMessage\":\"Are you sure you want to delete this post?\"},redraftConfirm:{\"id\":\"confirmations.redraft.confirm\",\"defaultMessage\":\"Delete & redraft\"},redraftHeading:{\"id\":\"confirmations.redraft.heading\",\"defaultMessage\":\"Delete & redraft\"},redraftMessage:{\"id\":\"confirmations.redraft.message\",\"defaultMessage\":\"Are you sure you want to delete this post and re-draft it? Favorites and reposts will be lost, and replies to the original post will be orphaned.\"},blockConfirm:{\"id\":\"confirmations.block.confirm\",\"defaultMessage\":\"Block\"},revealAll:{\"id\":\"status.show_more_all\",\"defaultMessage\":\"Show more for all\"},hideAll:{\"id\":\"status.show_less_all\",\"defaultMessage\":\"Show less for all\"},detailedStatus:{\"id\":\"status.detailed_status\",\"defaultMessage\":\"Detailed conversation view\"},replyConfirm:{\"id\":\"confirmations.reply.confirm\",\"defaultMessage\":\"Reply\"},replyMessage:{\"id\":\"confirmations.reply.message\",\"defaultMessage\":\"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?\"},blockAndReport:{\"id\":\"confirmations.block.block_and_report\",\"defaultMessage\":\"Block & Report\"}});var StatusDetails=function StatusDetails(props){var dispatch=useAppDispatch();var intl=useIntl();var getStatus=useCallback(makeGetStatus(),[]);var status=useAppSelector(function(state){return getStatus(state,{id:props.params.statusId});});var _useState=useState(!!status),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setIsLoaded=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),next=_useState4[0],setNext=_useState4[1];/** Fetch the status (and context) from the API. */var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var params,statusId,_yield$dispatch,next;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:params=props.params;statusId=params.statusId;_context.next=4;return dispatch(fetchStatusWithContext(statusId));case 4:_yield$dispatch=_context.sent;next=_yield$dispatch.next;setNext(next);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();// Load data.\nuseEffect(function(){fetchData().then(function(){setIsLoaded(true);}).catch(function(){setIsLoaded(true);});},[props.params.statusId]);var handleLoadMore=useCallback(debounce(function(){if(next&&status){dispatch(fetchNext(status.id,next)).then(function(_ref2){var next=_ref2.next;setNext(next);}).catch(function(){});}},300,{leading:true}),[next,status]);var handleRefresh=function handleRefresh(){return fetchData();};if(status!==null&&status!==void 0&&status.event){return/*#__PURE__*/_jsx(Redirect,{to:\"/@\".concat(status.getIn(['account','acct']),\"/events/\").concat(status.id)});}if(!status&&isLoaded){return/*#__PURE__*/_jsx(MissingIndicator,{});}else if(!status){return/*#__PURE__*/_jsx(Column,{},void 0,/*#__PURE__*/_jsx(PlaceholderStatus,{}));}if(status.group&&_typeof(status.group)==='object'){if(status.group.slug&&!props.params.groupSlug){return/*#__PURE__*/_jsx(Redirect,{to:\"/group/\".concat(status.group.slug,\"/posts/\").concat(props.params.statusId)});}}var titleMessage=function titleMessage(){if(status.visibility==='direct')return messages.titleDirect;return messages.title;};return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(titleMessage())},void 0,/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Thread,{status:status,next:next,handleLoadMore:handleLoadMore})));};export default StatusDetails;"],"names":["messages","title","titleDirect","deleteConfirm","deleteHeading","deleteMessage","redraftConfirm","redraftHeading","redraftMessage","blockConfirm","revealAll","hideAll","detailedStatus","replyConfirm","replyMessage","blockAndReport","props","dispatch","intl","getStatus","useCallback","status","state","id","params","statusId","_useState","useState","_useState2","isLoaded","setIsLoaded","_useState3","_useState4","next","setNext","fetchData","_ref","regeneratorRuntime","mark","_callee","_yield$dispatch","wrap","_context","prev","sent","stop","apply","this","arguments","useEffect","then","catch","handleLoadMore","_ref2","leading","event","to","concat","getIn","group","slug","groupSlug","label","formatMessage","visibility","onRefresh"],"sourceRoot":""}